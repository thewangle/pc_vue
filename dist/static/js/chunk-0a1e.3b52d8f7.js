(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0a1e"],{"0xGk":function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"d",function(){return r}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return c});var i=n("f0Pt"),a=n.n(i);function s(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/addsort",t)}function r(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/getsortinfo",t)}function o(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/getsortinfoall",t)}function u(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/getsortinfoone",t)}function l(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/editsortinfo",t)}function c(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/deletesort",t)}},21:function(t,e){},22:function(t,e){},23:function(t,e){},"3Hjr":function(t,e,n){t.exports=n.p+"static/img/nodata.2a4cf7d.jpg"},Gp3m:function(t,e,n){},HDHf:function(t,e,n){"use strict";n.d(e,"e",function(){return s}),n.d(e,"f",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return c}),n.d(e,"g",function(){return d}),n.d(e,"h",function(){return f}),n.d(e,"n",function(){return p}),n.d(e,"o",function(){return h}),n.d(e,"l",function(){return m}),n.d(e,"i",function(){return w}),n.d(e,"j",function(){return g}),n.d(e,"p",function(){return b}),n.d(e,"q",function(){return v}),n.d(e,"r",function(){return _}),n.d(e,"s",function(){return y}),n.d(e,"m",function(){return z}),n.d(e,"k",function(){return x});var i=n("f0Pt"),a=n.n(i);function s(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getsoldgoods",t)}function r(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getsoldgoodsbygroup",t)}function o(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getreturngoods",t)}function u(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getreturngoodsbygroup",t)}function l(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getlossgoods",t)}function c(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getlossgoodsbygroup",t)}function d(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getstoragegoods",t)}function f(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getstoragegoodsbygroup",t)}function p(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getsoldgoodsinfo",t)}function h(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getstoragegoodsinfo",t)}function m(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getreturngoodsinfo",t)}function w(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getlossgoodsinfo",t)}function g(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=member/getmembers",t)}function b(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getunsalablegoods",t)}function v(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getunsalablegoodsinfo",t)}function _(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getunsalablegoodsinfoforzb",t)}function y(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getunsalablegoodslist",t)}function z(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getruninfo",t)}function x(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=report/getmostone",t)}},eaBi:function(t,e,n){"use strict";var i=n("Gp3m");n.n(i).a},iILY:function(t,e,n){"use strict";n.r(e);var i=n("cLjf"),a=n.n(i),s=n("hDQ3"),r=n.n(s),o=n("3rzS"),u=n.n(o),l=n("7u+w"),c=n.n(l),d=(n("f0Pt"),n("a/LZ")),f=n.n(d),p=n("X4fA"),h=n("iVKg"),m=(n("xA6U"),n("0xGk")),w=n("HDHf"),g=(n("prnK"),n("AJLq")),b=n.n(g),v={name:"DashboardAdmin",components:{},data:function(){return{isShowEchart:!0,listQuery:{page_no:1,page_size:10,role:Object(p.a)(),uid:Object(p.d)(),pid:Object(p.f)()},isgz:!1,listLoading:!1,list:[],total:1,tab2name:Object(p.e)(),series_data:[],series_data_change:[],changeQushixAxis:[],changeQushiseries:[],listQuery2:{page_no:1,page_size:10,bm:"",gz:"",unsoledtime:30,unsalableNum:1,role:Object(p.a)(),uid:Object(p.d)(),pid:Object(p.f)()},tab1info:{zongnums:0,zoninprice:0,zongprice:0},bms:[],gzs:[],bodyMax:0,itemnums:[],itemnums2:[],itemnames:[],is_bm:!1,is_zzh:!1,is_gz:!1}},computed:{},mounted:function(){3==Object(p.a)()&&(this.isgz=!0),this.handleFilter2(),3!=Object(p.a)()&&this.getAllUserByidthis(),1==Object(p.a)()?(this.is_zzh=!0,this.is_bm=!1,this.is_gz=!1):2==Object(p.a)()?(this.is_zzh=!1,this.is_bm=!0,this.is_gz=!1):3==Object(p.a)()&&(this.is_zzh=!1,this.is_bm=!1,this.is_gz=!0)},created:function(){},methods:{toExcle:function(){var t=b.a.utils.table_to_book(document.getElementById("out-table"));b.a.writeFile(t,"滞销商品列表.xlsx")},zeOver:function(){u()("#zonge").toggleClass("animated wobble"),setTimeout(function(){u()("#zonge").removeClass("animated wobble")},1e3)},zeOver1:function(){u()("#zonge1").toggleClass("animated rubberBand"),setTimeout(function(){u()("#zonge1").removeClass("animated rubberBand")},1e3)},zeOver2:function(){u()("#zonge2").toggleClass("animated shake"),setTimeout(function(){u()("#zonge2").removeClass("animated shake")},1e3)},zeOver4:function(){u()("#zonge4").toggleClass("animated shake"),setTimeout(function(){u()("#zonge4").removeClass("animated shake")},1e3)},handleSizeChange:function(t){this.listQuery2.page_size=t,this._fetchActivityList(this.listQuery2)},handleCurrentChange:function(t){this.listQuery2.page_no=t,this._fetchActivityList(this.listQuery2)},_fetchActivityList:function(t){var e=this;return r()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.listLoading=!0,Object(w.s)(t).then(function(t){var n=t.data;200==n.code&&(e.listLoading=!1,e.total=n.data.count,e.list=n.data.data,""==e.list&&e.$message({type:"warning",message:"没有更多商品!"})),201==n.code&&(e.list=[],e.listLoading=!1,e.$message("没有更多商品!"))}).catch(function(t){e.list=[],e.listLoading=!1,e.$message("获取商品信息失败")});case 2:case"end":return n.stop()}},n,e)}))()},getAllUserByidthis:function(){var t=this;Object(h.j)(this.listQuery2).then(function(e){e.data.forEach(function(e){1==Object(p.a)()&&t.bms.push({label:e.department,value:e.id}),2==Object(p.a)()&&t.gzs.push({label:e.department,value:e.id})}),1==Object(p.a)()&&(t.listQuery2.bm=t.bms[0].value),2==Object(p.a)()&&(t.listQuery2.gz=t.gzs[0].value)}).catch(function(t){console.log(t)})},handleFilter2:function(t){var e=this;this.listQuery2.page_no=1,1==t&&(""==this.listQuery2.bm?this.tab2name=Object(p.e)():Object(h.f)({uid:this.listQuery2.bm}).then(function(t){var n=t.data;e.tab2name=n.department})),2==t&&(""==this.listQuery2.gz?this.tab2name=Object(p.e)():Object(h.f)({uid:this.listQuery2.gz}).then(function(t){var n=t.data;e.tab2name=n.department})),this._fetchActivityList2()},_fetchActivityList2:function(){var t=this;return r()(a.a.mark(function e(){var n,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=/^\+?[1-9][0-9]*$/).test(t.listQuery2.unsoledtime)&&n.test(t.listQuery2.unsalableNum)){e.next=4;break}return t.$message({message:"请您输入正确的数量",type:"warning"}),e.abrupt("return");case 4:return t.listQuery2.unsoledtimes=f()().subtract(t.listQuery2.unsoledtime,"days").valueOf()/1e3,e.next=7,Object(w.p)(t.listQuery2);case 7:i=e.sent,s=i.data,t.listQuery2.goodsLists=s,t.Getunsalablegoodsinfo(t.listQuery2),t._fetchreturnGoodsByGroup(t.listQuery2),t._fetchActivityList(t.listQuery2);case 13:case"end":return e.stop()}},e,t)}))()},Getunsalablegoodsinfo:function(t){var e=this;return r()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(w.q)(t).then(function(t){var n=t.data;e.tab1info=n});case 1:case"end":return n.stop()}},n,e)}))()},_fetchreturnGoodsByGroup:function(t){var e=this;return r()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.itemnums=[],e.itemnames=[],Object(w.r)(t).then(function(t){var n=t.data;if(201==n.code)e.isShowEchart=!1,e.$message({message:"没有更多滞销商品信息！",type:"warning",duration:5e3});else{e.isShowEchart=!0,n.forEach(function(t,n){var i=0;t.forEach(function(t,e){i+=Number(t.nums)}),1==e.listQuery2.role&&""==e.listQuery2.bm&&Object(h.f)({uid:t[0].pid}).then(function(t){var n=t.data;e.itemnames.push(n.department),e.itemnums.push({value:i,name:n.department})}),1==e.listQuery2.role&&""!=e.listQuery2.bm&&Object(h.f)({uid:t[0].uid}).then(function(t){var n=t.data;e.itemnames.push(n.department),e.itemnums.push({value:i,name:n.department})}),2==e.listQuery2.role&&""==e.listQuery2.gz&&Object(h.f)({uid:t[0].uid}).then(function(t){var n=t.data;e.itemnames.push(n.department),e.itemnums.push({value:i,name:n.department})}),2==e.listQuery2.role&&""!=e.listQuery2.gz&&Object(m.f)({id:t[0].sortid}).then(function(t){var n=t.data;e.itemnames.push(n[0].name),e.itemnums.push({value:i,name:n[0].name})}),3==e.listQuery2.role&&Object(m.f)({id:t[0].sortid}).then(function(t){var n=t.data;e.itemnames.push(n[0].name),e.itemnums.push({value:i,name:n[0].name})})});var i=e;setTimeout(function(){i.zbChart()},2e3)}}).catch(function(t){console.log(t)});case 3:case"end":return n.stop()}},n,e)}))()},zbChart:function(){var t=c.a.init(this.$refs.zbChart),e={toolbox:{feature:{saveAsImage:{title:"下载"}}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{top:95,left:55,itemGap:20,formatter:function(t){return t},orient:"vertical",data:this.itemnames},series:[{name:"库存数量占比",type:"pie",radius:"80%",roseType:"angle",center:["50%","50%"],label:{formatter:"{b}: {d}%"},data:this.itemnums}]};t.clear(),t.setOption(e),window.addEventListener("resize",function(){t.resize()})}}},_=(n("eaBi"),n("ZrdR")),y=Object(_.a)(v,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page_wrap animated fadeInLeft"},[i("div",{staticClass:"tab_model_wrap"},[i("div",{staticClass:"tag1_wrap"},[t.is_zzh?i("el-select",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请选择部门"},on:{change:function(e){t.handleFilter2(1)}},model:{value:t.listQuery2.bm,callback:function(e){t.$set(t.listQuery2,"bm",e)},expression:"listQuery2.bm"}},t._l(t.bms,function(t){return i("el-option",{attrs:{label:t.label,value:t.value}})})):t._e(),t._v(" "),t.is_bm?i("el-select",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请选择柜组"},on:{change:function(e){t.handleFilter2(2)}},model:{value:t.listQuery2.gz,callback:function(e){t.$set(t.listQuery2,"gz",e)},expression:"listQuery2.gz"}},t._l(t.gzs,function(t){return i("el-option",{attrs:{label:t.label,value:t.value}})})):t._e(),t._v(" "),i("el-input",{staticStyle:{width:"300px","margin-left":"10px"},attrs:{placeholder:"请输入入库时间"},model:{value:t.listQuery2.unsoledtime,callback:function(e){t.$set(t.listQuery2,"unsoledtime",e)},expression:"listQuery2.unsoledtime"}},[i("template",{slot:"prepend"},[t._v("入库超过")]),t._v(" "),i("template",{slot:"append"},[t._v("天")])],2),t._v(" "),i("el-input",{staticStyle:{width:"240px","margin-left":"10px"},attrs:{placeholder:"请输入滞销数量"},model:{value:t.listQuery2.unsalableNum,callback:function(e){t.$set(t.listQuery2,"unsalableNum",e)},expression:"listQuery2.unsalableNum"}},[i("template",{slot:"prepend"},[t._v("销量少于")])],2),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter2}},[t._v("查询")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.toExcle}},[t._v("导出")])],1),t._v(" "),i("div",{staticClass:"salesTag"},[i("div",{staticClass:"salesTagList",staticStyle:{width:"32%"},attrs:{id:"zonge"},on:{click:t.zeOver}},[i("div",{staticClass:"salesTagListBiao"},[t._v(t._s(t.tab2name)+" 滞销产品种类")]),t._v(" "),i("div",[i("span",{staticClass:"salesTagListnum"},[t._v(t._s(t.tab1info.zongnums))]),t._v(" 种")])]),t._v(" "),i("div",{staticClass:"salesTagList",staticStyle:{width:"32%","background-image":"linear-gradient(104deg, #6bb3ff, #58a4ff)"},attrs:{id:"zonge1"},on:{click:t.zeOver1}},[i("div",{staticClass:"salesTagListBiao"},[t._v(t._s(t.tab2name)+" 滞销成本")]),t._v(" "),i("div",[i("span",{staticClass:"salesTagListnum"},[t._v(t._s(t.tab1info.zoninprice))]),t._v("元")])]),t._v(" "),i("div",{staticClass:"salesTagList",staticStyle:{width:"32%","background-image":"linear-gradient(104deg, #ffbb3f, #ff9e47)"},attrs:{id:"zonge2"},on:{click:t.zeOver2}},[i("div",{staticClass:"salesTagListBiao"},[t._v(t._s(t.tab2name)+" 滞销预售总额")]),t._v(" "),i("div",[i("span",{staticClass:"salesTagListnum"},[t._v(t._s(t.tab1info.zongprice))]),t._v("元")])])]),t._v(" "),i("div",{staticStyle:{width:"100%","padding-right":"15px"}},[i("div",{staticClass:"fengebr",attrs:{id:"zonge4"},on:{click:t.zeOver4}},[i("h2",[t._v("滞销商品库存数量占比图例分析")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowEchart,expression:"!isShowEchart"}],staticClass:"noDate"},[i("img",{staticClass:"nodataImg",attrs:{src:n("3Hjr"),alt:""}}),t._v(" "),i("span",{staticClass:"nodataSpan"},[t._v("暂无数据")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowEchart,expression:"isShowEchart"}],ref:"zbChart",staticStyle:{width:"100%",height:"400px",margin:"20px 0"}})]),t._v(" "),t._m(0),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"",stripe:"",id:"out-table","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"序号",align:"center",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品名称",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"tag_yellow"},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"库存数量","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"tag_red"},[t._v(t._s(e.row.nums))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品编码","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.code))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品规格",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.format))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品进价",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.inprice)+" 元")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品售价",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.outprice)+" 元")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"毛利率",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(((e.row.outprice-e.row.inprice)/e.row.inprice*100).toFixed(2))+" %")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"入库时间",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"tag_blue"},[t._v(t._s(e.row.addtime))])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container",staticStyle:{padding:"0 20px"}},[i("el-pagination",{attrs:{"current-page":t.listQuery2.page_no,"page-sizes":[10,20,30,50],"page-size":t.listQuery2.page_size,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fengebr"},[e("h2",[this._v("滞销商品列表")])])}],!1,null,null,null);y.options.__file="unsalable.vue";e.default=y.exports},prnK:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"e",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return l});var i=n("f0Pt"),a=n.n(i);function s(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=supplier/addsupplier",t)}function r(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=supplier/getsupplierinfo",t)}function o(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/getsupplierall",t)}function u(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=supplier/editesupplierinfo",t)}function l(t){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=supplier/deletesupplier",t)}}}]);