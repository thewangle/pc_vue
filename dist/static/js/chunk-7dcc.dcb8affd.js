(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7dcc"],{"0xGk":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return s}),n.d(e,"f",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return l});var i=n("f0Pt"),r=n.n(i);function o(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/addsort",t)}function a(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getsortinfo",t)}function s(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getsortinfoall",t)}function u(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getsortinfoone",t)}function c(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/editsortinfo",t)}function l(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/deletesort",t)}},20:function(t,e){},21:function(t,e){},22:function(t,e){},Gp3m:function(t,e,n){},HDHf:function(t,e,n){"use strict";n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"g",function(){return d}),n.d(e,"h",function(){return f}),n.d(e,"l",function(){return p}),n.d(e,"m",function(){return g}),n.d(e,"k",function(){return h}),n.d(e,"i",function(){return b}),n.d(e,"j",function(){return m}),n.d(e,"n",function(){return v}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return _}),n.d(e,"q",function(){return w});var i=n("f0Pt"),r=n.n(i);function o(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getsoldgoods",t)}function a(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getsoldgoodsbygroup",t)}function s(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getreturngoods",t)}function u(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getreturngoodsbygroup",t)}function c(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getlossgoods",t)}function l(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getlossgoodsbygroup",t)}function d(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getstoragegoods",t)}function f(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getstoragegoodsbygroup",t)}function p(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getsoldgoodsinfo",t)}function g(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getstoragegoodsinfo",t)}function h(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getreturngoodsinfo",t)}function b(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getlossgoodsinfo",t)}function m(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=member/getmembers",t)}function v(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getunsalablegoods",t)}function y(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getunsalablegoodsinfo",t)}function _(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getunsalablegoodsinfoforzb",t)}function w(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=report/getunsalablegoodslist",t)}},eaBi:function(t,e,n){"use strict";var i=n("Gp3m");n.n(i).a},iILY:function(t,e,n){"use strict";n.r(e);var i=n("cLjf"),r=n.n(i),o=n("hDQ3"),a=n.n(o),s=n("3rzS"),u=n.n(s),c=n("88Rz"),l=n.n(c),d=(n("f0Pt"),n("a/LZ")),f=n.n(d),p=n("X4fA"),g=n("iVKg"),h=(n("xA6U"),n("0xGk")),b=n("HDHf"),m=(n("prnK"),n("AJLq")),v=n.n(m),y={name:"DashboardAdmin",components:{},data:function(){return{listQuery:{time:[],page_no:1,page_size:10,role:Object(p.a)(),uid:Object(p.d)(),pid:Object(p.f)()},isgz:!1,listLoading:!1,list:[],total:1,tab2name:Object(p.e)(),series_data:[],series_data_change:[],changeQushixAxis:[],changeQushiseries:[],time_tab2:[f()().subtract(7,"days").format(),f()().format()],listQuery2:{page_no:1,page_size:10,time:[],bm:"",gz:"",unsalableNum:1,role:Object(p.a)(),uid:Object(p.d)(),pid:Object(p.f)()},tab1info:{zongnums:0,zoninprice:0,zongprice:0},bms:[],gzs:[],bodyMax:0,itemnums:[],itemnums2:[],itemnames:[],is_bm:!1,is_zzh:!1,is_gz:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]}}},computed:{},mounted:function(){3==Object(p.a)()&&(this.isgz=!0),this.time_select2(),this.handleFilter2(),3!=Object(p.a)()&&this.getAllUserByidthis(),1==Object(p.a)()?(this.is_zzh=!0,this.is_bm=!1,this.is_gz=!1):2==Object(p.a)()?(this.is_zzh=!1,this.is_bm=!0,this.is_gz=!1):3==Object(p.a)()&&(this.is_zzh=!1,this.is_bm=!1,this.is_gz=!0)},created:function(){},methods:{toExcle:function(){var t=v.a.utils.table_to_book(document.getElementById("out-table"));v.a.writeFile(t,"滞销商品列表.xlsx")},zeOver:function(){u()("#zonge").toggleClass("animated wobble"),setTimeout(function(){u()("#zonge").removeClass("animated wobble")},1e3)},zeOver1:function(){u()("#zonge1").toggleClass("animated rubberBand"),setTimeout(function(){u()("#zonge1").removeClass("animated rubberBand")},1e3)},zeOver2:function(){u()("#zonge2").toggleClass("animated shake"),setTimeout(function(){u()("#zonge2").removeClass("animated shake")},1e3)},zeOver4:function(){u()("#zonge4").toggleClass("animated shake"),setTimeout(function(){u()("#zonge4").removeClass("animated shake")},1e3)},handleSizeChange:function(t){this.listQuery2.page_size=t,this._fetchActivityList(this.listQuery2)},handleCurrentChange:function(t){this.listQuery2.page_no=t,this._fetchActivityList(this.listQuery2)},_fetchActivityList:function(t){var e=this;return a()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.listLoading=!0,Object(b.q)(t).then(function(t){var n=t.data;200==n.code&&(e.listLoading=!1,e.total=n.data.count,e.list=n.data.data,""==e.list&&e.$message({type:"warning",message:"没有更多商品!"})),201==n.code&&(e.list=[],e.listLoading=!1,e.$message("没有更多商品!"))}).catch(function(t){e.list=[],e.listLoading=!1,e.$message("获取商品信息失败")});case 2:case"end":return n.stop()}},n,e)}))()},getAllUserByidthis:function(){var t=this;Object(g.i)(this.listQuery2).then(function(e){e.data.forEach(function(e){1==Object(p.a)()&&t.bms.push({label:e.department,value:e.id}),2==Object(p.a)()&&t.gzs.push({label:e.department,value:e.id})})}).catch(function(t){console.log(t)})},time_select2:function(t){this.listQuery2.time[0]=f()(this.time_tab2[0]).valueOf()/1e3,this.listQuery2.time[1]=f()(this.time_tab2[1]).valueOf()/1e3},handleFilter2:function(t){var e=this;this.listQuery2.page_no=1,1==t&&(""==this.listQuery2.bm?this.tab2name=Object(p.e)():Object(g.e)({uid:this.listQuery2.bm}).then(function(t){var n=t.data;e.tab2name=n.department})),2==t&&(""==this.listQuery2.gz?this.tab2name=Object(p.e)():Object(g.e)({uid:this.listQuery2.gz}).then(function(t){var n=t.data;e.tab2name=n.department})),this._fetchActivityList2()},_fetchActivityList2:function(){var t=this;return a()(r.a.mark(function e(){var n,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.listQuery2.time.length){e.next=3;break}return t.$message({message:"请您选择日期！",type:"warning"}),e.abrupt("return");case 3:return e.next=5,Object(b.n)(t.listQuery2);case 5:n=e.sent,i=n.data,t.listQuery2.goodsLists=i,t.Getunsalablegoodsinfo(t.listQuery2),t._fetchreturnGoodsByGroup(t.listQuery2),t._fetchActivityList(t.listQuery2);case 11:case"end":return e.stop()}},e,t)}))()},Getunsalablegoodsinfo:function(t){var e=this;return a()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(b.o)(t).then(function(t){var n=t.data;e.tab1info=n});case 1:case"end":return n.stop()}},n,e)}))()},_fetchreturnGoodsByGroup:function(t){var e=this;return a()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.itemnums=[],e.itemnames=[],Object(b.p)(t).then(function(t){var n=t.data;if(201==n.code)e.$message({message:"没有更多新入库信息！",type:"warning",duration:5e3});else{n.forEach(function(t,n){var i=0;t.forEach(function(t,e){i+=Number(t.nums)}),1==e.listQuery2.role&&""==e.listQuery2.bm&&Object(g.e)({uid:t[0].pid}).then(function(t){var n=t.data;e.itemnames.push(n.department),e.itemnums.push({value:i,name:n.department})}),1==e.listQuery2.role&&""!=e.listQuery2.bm&&Object(g.e)({uid:t[0].uid}).then(function(t){var n=t.data;e.itemnames.push(n.department),e.itemnums.push({value:i,name:n.department})}),2==e.listQuery2.role&&""==e.listQuery2.gz&&Object(g.e)({uid:t[0].uid}).then(function(t){var n=t.data;e.itemnames.push(n.department),e.itemnums.push({value:i,name:n.department})}),2==e.listQuery2.role&&""!=e.listQuery2.gz&&Object(h.f)({id:t[0].sortid}).then(function(t){var n=t.data;e.itemnames.push(n[0].name),e.itemnums.push({value:i,name:n[0].name})}),3==e.listQuery2.role&&Object(h.f)({id:t[0].sortid}).then(function(t){var n=t.data;e.itemnames.push(n[0].name),e.itemnums.push({value:i,name:n[0].name})})});var i=e;setTimeout(function(){i.zbChart()},2e3)}}).catch(function(t){console.log(t)});case 3:case"end":return n.stop()}},n,e)}))()},zbChart:function(){var t=l.a.init(this.$refs.zbChart),e={toolbox:{feature:{saveAsImage:{title:"下载"}}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} 元 ({d}%)"},legend:{top:95,left:55,itemGap:20,formatter:function(t){return t},orient:"vertical",data:this.itemnames},series:[{name:"销售额占比",type:"pie",radius:"80%",roseType:"angle",center:["50%","50%"],label:{formatter:"{b}: {d}%"},data:this.itemnums}]};t.clear(),t.setOption(e),window.addEventListener("resize",function(){t.resize()})}}},_=(n("eaBi"),n("ZrdR")),w=Object(_.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page_wrap animated rotateIn"},[n("div",{staticClass:"tab_model_wrap"},[n("div",{staticClass:"tag1_wrap"},[n("span",{staticClass:"tabSpan"},[t._v("滞销时间段：")]),t._v(" "),n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","start-placeholder":"开始日期","range-separator":"至","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.time_select2},model:{value:t.time_tab2,callback:function(e){t.time_tab2=e},expression:"time_tab2"}}),t._v(" "),t.is_zzh?n("el-select",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请选择部门",clearable:""},on:{change:function(e){t.handleFilter2(1)}},model:{value:t.listQuery2.bm,callback:function(e){t.$set(t.listQuery2,"bm",e)},expression:"listQuery2.bm"}},t._l(t.bms,function(t){return n("el-option",{attrs:{label:t.label,value:t.value}})})):t._e(),t._v(" "),t.is_bm?n("el-select",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请选择柜组",clearable:""},on:{change:function(e){t.handleFilter2(2)}},model:{value:t.listQuery2.gz,callback:function(e){t.$set(t.listQuery2,"gz",e)},expression:"listQuery2.gz"}},t._l(t.gzs,function(t){return n("el-option",{attrs:{label:t.label,value:t.value}})})):t._e(),t._v(" "),n("span",{staticClass:"tabSpan"},[t._v("滞销数量：")]),t._v(" "),n("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请输入滞销数量"},model:{value:t.listQuery2.unsalableNum,callback:function(e){t.$set(t.listQuery2,"unsalableNum",e)},expression:"listQuery2.unsalableNum"}}),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter2}},[t._v("查询")]),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.toExcle}},[t._v("导出")])],1),t._v(" "),n("div",{staticClass:"salesTag"},[n("div",{staticClass:"salesTagList",staticStyle:{width:"32%"},attrs:{id:"zonge"},on:{click:t.zeOver}},[n("div",{staticClass:"salesTagListBiao"},[t._v(t._s(t.tab2name)+" 滞销产品种类")]),t._v(" "),n("div",[n("span",{staticClass:"salesTagListnum"},[t._v(t._s(t.tab1info.zongnums))]),t._v(" 种")])]),t._v(" "),n("div",{staticClass:"salesTagList",staticStyle:{width:"32%","background-image":"linear-gradient(104deg, #6bb3ff, #58a4ff)"},attrs:{id:"zonge1"},on:{click:t.zeOver1}},[n("div",{staticClass:"salesTagListBiao"},[t._v(t._s(t.tab2name)+" 滞销成本")]),t._v(" "),n("div",[n("span",{staticClass:"salesTagListnum"},[t._v(t._s(t.tab1info.zoninprice))]),t._v("元")])]),t._v(" "),n("div",{staticClass:"salesTagList",staticStyle:{width:"32%","background-image":"linear-gradient(104deg, #ffbb3f, #ff9e47)"},attrs:{id:"zonge2"},on:{click:t.zeOver2}},[n("div",{staticClass:"salesTagListBiao"},[t._v(t._s(t.tab2name)+" 滞销预售总额")]),t._v(" "),n("div",[n("span",{staticClass:"salesTagListnum"},[t._v(t._s(t.tab1info.zongprice))]),t._v("元")])])]),t._v(" "),n("div",{staticStyle:{width:"100%","padding-right":"15px"}},[n("div",{staticClass:"fengebr",attrs:{id:"zonge4"},on:{click:t.zeOver4}},[n("h2",[t._v("滞销成本占比图例分析")])]),t._v(" "),n("div",{ref:"zbChart",staticStyle:{width:"100%",height:"400px",margin:"20px 0"}})]),t._v(" "),t._m(0),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"",id:"out-table","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号",align:"center",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"商品名称",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"商品编码","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.code))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"商品规格",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.format))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"商品进价",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.inprice)+" 元")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"商品售价",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.outprice)+" 元")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"毛利率",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(((e.row.outprice-e.row.inprice)/e.row.inprice*100).toFixed(2))+" %")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"入库时间",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.addtime))])]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container",staticStyle:{padding:"0 20px"}},[n("el-pagination",{attrs:{"current-page":t.listQuery2.page_no,"page-sizes":[10,20,30,50],"page-size":t.listQuery2.page_size,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fengebr"},[e("h2",[this._v("滞销商品列表")])])}],!1,null,null,null);w.options.__file="unsalable.vue";e.default=w.exports},iVKg:function(t,e,n){"use strict";n.d(e,"k",function(){return o}),n.d(e,"j",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"l",function(){return l}),n.d(e,"f",function(){return d}),n.d(e,"g",function(){return f}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return g}),n.d(e,"d",function(){return h}),n.d(e,"e",function(){return b});var i=n("f0Pt"),r=n.n(i);function o(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/login",t)}function a(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/getuserinfo",t)}function s(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/adduser",t)}function u(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/deleuser",t)}function c(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/editeuser",t)}function l(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/renewalfee",t)}function d(t){return r.a.get("http://49.235.163.210/yii2/frontend/web/?r=login/getallusers")}function f(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/getallusersbyid",t)}function p(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/getallusersbyidmain",t)}function g(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/getallusersbyidthis",t)}function h(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/getalluser",t)}function b(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=login/getalluserbyuid",t)}},prnK:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return c});var i=n("f0Pt"),r=n.n(i);function o(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=supplier/addsupplier",t)}function a(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=supplier/getsupplierinfo",t)}function s(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getsupplierall",t)}function u(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=supplier/editesupplierinfo",t)}function c(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=supplier/deletesupplier",t)}},xA6U:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return s}),n.d(e,"g",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return d}),n.d(e,"k",function(){return f}),n.d(e,"j",function(){return p}),n.d(e,"h",function(){return g}),n.d(e,"l",function(){return h}),n.d(e,"i",function(){return b});var i=n("f0Pt"),r=n.n(i);function o(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/addgoods",t)}function a(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getgoodsinfo",t)}function s(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getgoodsinfolog",t)}function u(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getgoodbygoodsid",t)}function c(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getgoodsinfobyid",t)}function l(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/editegoodsinfo",t)}function d(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/deletgoods",t)}function f(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getgoodsinfofortab1",t)}function p(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getgoodschangefortab1",t)}function g(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getgoodschangequshi",t)}function h(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getpricechangequshi",t)}function b(t){return r.a.post("http://49.235.163.210/yii2/frontend/web/?r=goods/getpricechangequshisort",t)}}}]);