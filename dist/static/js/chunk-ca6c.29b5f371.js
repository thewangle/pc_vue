(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ca6c"],{"+UXW":function(e,t,a){"use strict";a.r(t);var i=a("P2sY"),n=a.n(i),s=a("14Xm"),l=a.n(s),o=a("gDS+"),r=a.n(o),c=a("D3Ub"),u=a.n(c),p=a("GQeE"),d=a.n(p),f=a("zK94"),m=a("+vOl"),v=a("X4fA"),y=a("8SHQ"),h=a("vDqi"),_=a.n(h),b={name:"ActivityManage",directives:{waves:a("ZySA").a},filters:{statusFilter:function(e){return{1:"待审核",2:"准备中审核通过",3:"已开始进行中",4:"暂停",5:"结束已完成 ",6:"审核未通过"}[e]},activityFilter:function(e){return{1:"团队-基础版",2:"个人-基础版"}[e]},typeFilter:function(e){return{1:"选择题",2:"文字题",3:"图片题",4:"视频题",5:"语音题",6:"拍照题"}[e]},answerTypeFilter:function(e){return{1:"普通题",2:"关卡题",3:"团队限时题",4:"活动抢答题"}[e]},timeFilter:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((+t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((+t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((+t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((+t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(+t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}},data:function(){return{dialogActivityTitle:"",dialogActivitytype:"",iconFilelist:[],bgFileList:[],taskQFileList:[],taskAFileList:[],list:null,listLoading:!1,listQuery:{type:null,agent_name:null,name:null,status:null},activities:[{label:"团队-基础版",key:1},{label:"个人-基础版",key:2}],status:[{label:"待审批",key:"1"},{label:"准备中",key:"2"},{label:"进行中",key:"3"},{label:"暂停中",key:"4"},{label:"已完成",key:"5"},{label:"未通过",key:"6"}],dialogFormVisible:!1,dialogFormDisable:!1,taskList:[],dialogTaskVisible:!1,dialogTaskTitle:"",dialogTaskType:"",dialogTaskImgVisible:!1,dialogTaskImageUrl:"",dialogCheckVisible:!1,dialogTitle:"",dialogType:"",dialogReasonVisible:!1,reason:"",payMoney:Object(v.d)(),dialogPayVisible:!1,activityInfo:{agentName:Object(v.b)(),type:"",coachId:"",name:"",keepTime:"",score:"",scoreType:"",scoreShowType:"",time:"",actDesc:"",bgImgUrl:"",iconUrl:"",gif_url:"",price:"",check:""},activityId:null,taskInfo:{name:null,type:"1",desc:null,answer_type:"1",seq:null,question_img:null,options:{A:null,B:null,C:null,D:null},answer:[],answer2:"",answer_url:"",score:null,answer_limit:1,limit_time:""},dialogImageUrl:"",dialogVisible:!1,dialogAnswerImageUrl:"",dialogAnswerImgVisible:!1,nineImageUrl:"",dialogNineVisible:!1,coachList:[],domain:"http://upload.qiniup.com/",qiniuAddress:y.a,checkInfo:{name:null,type:null,set_start_time:null,set_stop_time:null,money:null},pay_er_img:null,set_start_time:"",set_stop_time:"",payType:"1",gifFileList:[],activity:{}}},computed:{showable:function(){return+Object(v.c)()>4},checkdisabled:function(){return!!this.activityInfo.check}},created:function(){this.init()},methods:{taskTypeChange:function(e){this.taskInfo.answer_type="1",this.taskInfo.answer_limit=1},answerTypeChange:function(e){"4"===e&&(this.taskInfo.answer_limit=1),this.taskInfo.limit_time=""},handleCheckedChange:function(e){e&&(this.activityInfo.keepTime="")},handleImgChange:function(e){var t=this,a={},i=document.querySelector("#ImgInput"),n=i.files.length,s={headers:{"Content-Type":"multipart/form-data"}};d()(i.files).forEach(function(){var o=u()(l.a.mark(function o(c){var u,p,f,m,v,y,h;return l.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=i.files[c],console.log(u),p="top-team"+Date.now()+Math.floor(100*Math.random())+u.name,l.next=5,t._fetchQiNiuToken();case 5:return f=l.sent,(m=new FormData).append("file",u),m.append("token",f),m.append("key",p),l.next=12,_.a.post(t.domain,m,s);case 12:if(v=l.sent,y=t.qiniuAddress+"/"+v.data.key,h=u.name.split(".")[0],a[h]=y,d()(a).length!==n){l.next=21;break}return l.next=19,_.a.post("/i/topteam/admin/MatchTaskPic",{activity_id:t.activityId,match_list:r()(a)});case 19:l.sent.data.error_code||(t.$message({message:"上传成功",type:"success"}),e.target.value="",t._fetchTaskList(t.activityId));case 21:case"end":return l.stop()}},o,t)}));return function(e){return o.apply(this,arguments)}}())},handleRemove:function(e,t){this.taskAFileList=t},handleActivityChange:function(e){"2"===e&&(this.activityInfo.price=10,this.activityInfo.answer_limit=1,this.activityInfo.scoreType="1"),this.activityInfo.check=!1,this.activityInfo.coachId=null},handleFileChange:function(e){var t=this,a=this.activityId,i=document.querySelector("#fileInput"),n=new FormData;n.append("file",i.files[0]),n.append("activity_id",a),_.a.post("/i/topteam/admin/importTask",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(i){var n=i.data;0!==n.error_code?t.$message({message:n.error_msg,type:"error"}):(t.$message({message:"导入成功",type:"success"}),e.target.value="",t._fetchTaskList(a))})},handleFilter:function(){this._fetchActivityList()},handleCreateActivity:function(){this.dialogFormVisible=!0,this.dialogActivityTitle="新增活动",this.dialogActivitytype="add"},handleBgCardPreview:function(){this.dialogImageUrl=this.activityInfo.bgImgUrl,this.dialogVisible=!0},handleIconCardPreview:function(){this.dialogImageUrl=this.activityInfo.iconUrl,this.dialogVisible=!0},handleGifCardPreview:function(){this.dialogImageUrl=this.activityInfo.gif_url,this.dialogVisible=!0},handleTaskImgPreview:function(){this.dialogTaskImageUrl=this.taskInfo.question_img,this.dialogTaskImgVisible=!0},handleAnswerImgPreview:function(){this.dialogAnswerImageUrl=this.taskInfo.answer_url,this.dialogAnswerImgVisible=!0},handleNineImgPreview:function(e){this.nineImageUrl=e.url,this.dialogNineVisible=!0},handleUpLoadBgImg:function(e){this._uploadQiNiu(e,"bgImg")},handleUpLoadIconImg:function(e){this._uploadQiNiu(e,"icon")},handleUpLoadGifImg:function(e){this._uploadQiNiu(e,"gif")},handleUpLoadTaksImg:function(e){this._uploadQiNiu(e,"task")},handleUpLoadAnswerImg:function(e){this._uploadQiNiu(e,"answer")},handleUpLoadNineImg:function(e){this._uploadQiNiu(e,"nine")},handelUpdateTaskSubmit:function(){var e=this;return u()(l.a.mark(function t(){var a,i,s,o,c,u;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.taskInfo,i=a.name,s=a.score,o=a.seq,c=a.answer_limit,i&&s&&o&&c){t.next=4;break}return e.$message({message:"必填项不能为空",type:"error"}),t.abrupt("return");case 4:if(u=n()({},e.taskInfo),Array.isArray(u.answer)&&(u.answer=r()(u.answer.sort())),"1"!==u.type){t.next=13;break}if(u.options.A&&u.options.B&&u.options.C&&u.options.D){t.next=10;break}return e.$message({message:"选项不能为空",type:"error"}),t.abrupt("return");case 10:if(u.answer.length){t.next=13;break}return e.$message({message:"请填写答案",type:"error"}),t.abrupt("return");case 13:if("3"!==u.type){t.next=22;break}if(u.options=[],e.taskAFileList.forEach(function(e){u.options.push(e.url)}),!(u.options.length<9)){t.next=19;break}return e.$message({message:"请上传九张图片",type:"error"}),t.abrupt("return");case 19:if(u.answer.length){t.next=22;break}return e.$message({message:"请填写答案",type:"error"}),t.abrupt("return");case 22:if(u.options=r()(u.options),"2"!==u.type){t.next=28;break}if(u.answer2){t.next=27;break}return e.$message({message:"答案不能为空",type:"error"}),t.abrupt("return");case 27:u.answer=u.answer2;case 28:if("4"!==u.type){t.next=33;break}if(u.answer_url){t.next=32;break}return e.$message({message:"请上传视频",type:"error"}),t.abrupt("return");case 32:u.answer=u.answer_url;case 33:if("5"!==u.type){t.next=38;break}if(u.answer_url){t.next=37;break}return e.$message({message:"请上音频",type:"error"}),t.abrupt("return");case 37:u.answer=u.answer_url;case 38:if("6"!==u.type){t.next=43;break}if(u.answer_url){t.next=42;break}return e.$message({message:"请上传拍照图片",type:"error"}),t.abrupt("return");case 42:u.answer=u.answer_url;case 43:return u.limit_time||delete u.limit_time,t.prev=44,t.next=47,Object(f.i)(r()(u));case 47:t.sent,e.$message({message:"修改成功",type:"success"}),e.dialogTaskVisible=!1,e._fetchTaskList(e.activityId),t.next=55;break;case 53:t.prev=53,t.t0=t.catch(44);case 55:case"end":return t.stop()}},t,e,[[44,53]])}))()},handleUpdateTask:function(e){var t=this;console.log(e),this.dialogTaskType="edit",this.dialogTaskTitle="修改任务",this.dialogTaskVisible=!0,this.taskInfo.id=e.id,this.taskInfo.name=e.name,this.taskInfo.type=e.type,this.taskInfo.desc=e.task_desc,this.taskInfo.score=e.score,this.taskInfo.seq=e.seq,this.taskInfo.answer_limit=e.answer_limit,this.taskInfo.answer_type=e.answer_type,this.taskInfo.limit_time=e.limit_time,e.question_img&&(this.taskInfo.question_img=e.question_img,this.taskQFileList=[{name:e.name,url:e.question_img}]),"1"===e.type&&(this.taskInfo.answer=JSON.parse(e.answer),this.taskInfo.options=JSON.parse(e.options)),"2"===e.type&&(this.taskInfo.answer2=e.answer),"3"===e.type&&(this.taskAFileList=[],this.taskInfo.answer=JSON.parse(e.answer),this.taskInfo.options=JSON.parse(e.options),this.taskInfo.options.forEach(function(e,a){t.taskAFileList.push({name:"图片"+(a+1),url:e})})),"4"!==e.type&&"5"!==e.type&&"6"!==e.type||(this.taskInfo.answer_url=e.answer,this.taskAFileList=[{name:e.name,url:e.answer}])},handleGobackActivityList:function(){this.handleClosePayDialog(),this.handleCloseCheckDialog()},handleGetPayEr:function(){var e=this;return u()(l.a.mark(function t(){var a,i,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=void 0,"1"===e.checkInfo.type?a="team":"2"===e.checkInfo.type&&(a="person"),t.next=4,Object(f.e)({type_id:e.activityId,order_type:a});case 4:if(i=t.sent,n=i.data,"1"!==e.payType){t.next=10;break}e.pay_er_img="/i/topteam/api/getpayinfo?order_sn="+n.order_sn+"&pay_type=1",t.next=21;break;case 10:if("4"!==e.payType){t.next=21;break}return t.prev=11,t.next=14,Object(f.q)({order_sn:n.order_sn,pay_type:e.payType});case 14:t.sent,e.$message({message:"支付成功",type:"success"}),e.handleClosePayDialog(),t.next=21;break;case 19:t.prev=19,t.t0=t.catch(11);case 21:case"end":return t.stop()}},t,e,[[11,19]])}))()},handleCheckPass:function(){this.dialogPayVisible=!0},handleClosePayDialog:function(){this.dialogPayVisible=!1,this.pay_er_img="",this.payType="1"},handelAuditact:function(){this.dialogReasonVisible=!0},handleUpdateActivity:function(){var e=this;return u()(l.a.mark(function t(){var a,i,s,o,r,c,u,p,d,f,m,v,y,h,_,b,g;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.dialogActivityTitle="修改活动",e.dialogFormVisible=!0,e.dialogActivitytype="edit",a=e.activity,i=a.agent_name,s=a.agent_id,o=a.act_desc,r=a.set_start_time,c=a.score,u=a.set_stop_time,a.activity_status,p=a.type,d=a.coach_id,f=a.name,m=a.score_type,v=a.score_show_type,y=a.keep_time,h=a.money,_=a.bg_img,b=a.icon,g=a.gif_url,e.activityInfo.score=c,e.activityInfo.agentName=i,e.activityInfo.type=p,e.activityInfo.agent_id=s,e.activityInfo.coachId=d,e.activityInfo.name=f,e.activityInfo.scoreType=m,e.activityInfo.scoreShowType=v,e.activityInfo.keepTime=y,"0"===y&&(e.activityInfo.check=!0),e.activityInfo.price=h/100,e.activityInfo.time=[1e3*r,1e3*u],e.activityInfo.actDesc=o,e.activityInfo.bgImgUrl=_,_&&(e.bgFileList=[{name:"活动背景图",url:_}]),e.activityInfo.iconUrl=b,b&&(e.iconFilelist=[{name:"活动封面图",url:b}]),e.activityInfo.gif_url=g,g&&(e.gifFileList=[{name:"gif",url:g}]),"2"===e.activityInfo.type&&(e.activityInfo.coachId=null,e.activityInfo.scoreShowType=null),e.activityInfo=n()({},e.activityInfo);case 25:case"end":return t.stop()}},t,e)}))()},handleEditActivity:function(e){var t=this;return u()(l.a.mark(function a(){var i,n,s,o,r,c,u,p;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.activityId=e.id,a.next=3,Object(f.j)({act_id:e.id});case 3:return i=a.sent,a.next=6,t._fetchTaskList(e.id);case 6:n=i.data,t.activity=n,s=n.name,o=n.type,r=n.set_start_time,c=n.set_stop_time,u=n.money,p=n.qcode_url,t.checkInfo={name:s,type:o,money:u,qcode_url:p},t.checkInfo.set_start_time=r,t.checkInfo.set_stop_time=c,t.dialogCheckVisible=!0,t.dialogTitle="活动修改",t.dialogType="edit";case 15:case"end":return a.stop()}},a,t)}))()},handleShowActivityInfo:function(e){var t=this;return u()(l.a.mark(function a(){var i,n,s,o,r,c,u,p;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.activityId=e.id,a.next=3,Object(f.j)({act_id:e.id});case 3:return i=a.sent,a.next=6,t._fetchTaskList(e.id);case 6:n=i.data,s=n.name,o=n.type,r=n.set_start_time,c=n.set_stop_time,u=n.money,p=n.qcode_url,t.checkInfo={name:s,type:o,set_start_time:r,set_stop_time:c,money:u,qcode_url:p},t.dialogCheckVisible=!0,t.dialogTitle="活动查看",t.dialogType="show";case 12:case"end":return a.stop()}},a,t)}))()},handleCheckActivity:function(e){var t=this;return u()(l.a.mark(function a(){var i,n,s,o,r,c,u;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.activityId=e.id,a.next=3,Object(f.j)({act_id:e.id});case 3:return i=a.sent,a.next=6,t._fetchTaskList(e.id);case 6:n=i.data,s=n.name,o=n.type,r=n.set_start_time,c=n.set_stop_time,u=n.money,t.checkInfo={name:s,type:o,set_start_time:r,set_stop_time:c,money:u},t.dialogCheckVisible=!0,t.dialogTitle="活动审批",t.dialogType="check";case 12:case"end":return a.stop()}},a,t)}))()},handleCreateActivitySubmit:function(){this._addActivity()},handleCloseReasonDialog:function(){this.dialogReasonVisible=!1,this.reason=""},handleCloseDialog:function(){this.dialogFormDisable=!1,"add"===this.dialogActivitytype&&(this.activityId=null,this.taskList=[],this._resetActivityInfo(),this._fetchActivityList()),"edit"===this.dialogActivitytype&&this._resetActivityInfo()},handleOpenTaskDialog:function(){this.dialogTaskType="add",this.dialogTaskTitle="添加任务",this.dialogTaskVisible=!0},handleCloseTaskDialog:function(){this._resetTaskInfo(),this.dialogTaskVisible=!1},handleCloseCheckDialog:function(){this.dialogCheckVisible=!1,this.activityId=null,this.taskList=[],this.activityInfo={},this._restCheckInfo(),this._fetchActivityList()},handleDeleteActivity:function(e){var t=this;this.$confirm("确认删除该活动？").then(function(){var a=u()(l.a.mark(function a(i){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(f.h)(e);case 2:return a.next=4,t._fetchActivityList();case 4:t.$message({message:"删除成功",type:"success"});case 5:case"end":return a.stop()}},a,t)}));return function(e){return a.apply(this,arguments)}}()).catch(function(e){})},handleClickTask:function(e){var t=this;this.$confirm("确认删除该任务？").then(function(){var a=u()(l.a.mark(function a(i){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(f.f)(e);case 2:return a.next=4,t._fetchTaskList(t.activityId);case 4:t.$message({message:"删除成功",type:"success"});case 5:case"end":return a.stop()}},a,t)}));return function(e){return a.apply(this,arguments)}}()).catch(function(e){})},handleCancelActivity:function(){var e=this;this.$confirm("确认不通过该活动？").then(function(){var t=u()(l.a.mark(function t(a){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.d)({activity_id:e.activityId,reason:e.reason});case 2:return e.handleCloseReasonDialog(),e.handleCloseCheckDialog(),t.next=6,e._fetchActivityList();case 6:e.$message({message:"审批成功",type:"success"});case 7:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){})},_uploadQiNiu:function(e,t){var a=this;return u()(l.a.mark(function i(){var n,s,o,r;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n={headers:{"Content-Type":"multipart/form-data"}},s="top-team"+Date.now()+Math.floor(100*Math.random())+e.file.name,i.next=4,a._fetchQiNiuToken();case 4:o=i.sent,(r=new FormData).append("file",e.file),r.append("token",o),r.append("key",s),_.a.post(a.domain,r,n).then(function(e){var i=a.qiniuAddress+"/"+e.data.key;"bgImg"===t&&(a.activityInfo.bgImgUrl=i),"icon"===t&&(a.activityInfo.iconUrl=i),"gif"===t&&(a.activityInfo.gif_url=i),"task"===t&&(a.taskInfo.question_img=i),"answer"===t&&(a.taskInfo.answer_url=i),"nine"===t&&a.taskAFileList.push({name:e.data.key.slice(0,23),url:i})});case 10:case"end":return i.stop()}},i,a)}))()},_fetchCoachList:function(){var e=this;return u()(l.a.mark(function t(){var a,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.l)();case 2:a=t.sent,i=a.data,e.coachList=i;case 5:case"end":return t.stop()}},t,e)}))()},_fetchQiNiuToken:function(){var e=this;return u()(l.a.mark(function t(){var a,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.c)();case 2:return a=e.sent,i=a.data,e.abrupt("return",i);case 5:case"end":return e.stop()}},t,e)}))()},handleUpdateActivitySubmit:function(){var e=this;return u()(l.a.mark(function t(){var a,i,n,s,o,r,c,u,p,d,m,v,y,h,_,b,g,k,I,w,x,T,C,A,S;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},i=e.activityInfo,n=i.time,s=i.name,o=i.keepTime,r=i.score,c=i.coachId,u=i.actDesc,p=i.scoreType,d=i.scoreShowType,m=i.type,v=i.bgImgUrl,y=i.iconUrl,h=i.price,_=i.check,b=i.gif_url,g=i.agent_id,"1"!==m){t.next=8;break}if(n.length&&s&&o&&r&&c&&m){t.next=6;break}return e.$message({message:"必填项不能为空",type:"error"}),t.abrupt("return");case 6:t.next=12;break;case 8:if(n.length&&s&&m&&v&&y){t.next=11;break}return e.$message({message:"必填项不能为空",type:"error"}),t.abrupt("return");case 11:a.gif_url=b;case 12:return a.set_start_time=n[0]/1e3,a.set_stop_time=n[1]/1e3,a.agent_id=g,a.act_id=e.activityId,a.name=s,a.keep_time=o,a.score=r,a.coach_id=c,a.act_desc=u,a.score_type=p,a.score_show_type=d,a.type=m,a.bg_img=v,a.icon=y,a.money=h,_&&(a.keep_time=0),"2"===a.type&&(a.score=0,a.coach_id=0,a.score_show_type=0),"1"===a.type&&(a.money=0),t.prev=30,t.next=33,Object(f.r)(a);case 33:return e.dialogFormDisable=!0,e.$message({message:"修改成功",type:"success"}),t.next=37,Object(f.j)({act_id:a.act_id});case 37:k=t.sent,I=k.data,w=I.name,x=I.type,T=I.set_start_time,C=I.set_stop_time,A=I.money,S=I.qcode_url,e.checkInfo={name:w,type:x,money:A,qcode_url:S},e.set_start_time=1e3*T,e.set_stop_time=1e3*C,e.checkInfo.set_start_time=1e3*T,e.checkInfo.set_stop_time=1e3*C,t.next=48;break;case 46:t.prev=46,t.t0=t.catch(30);case 48:case"end":return t.stop()}},t,e,[[30,46]])}))()},_addActivity:function(){var e=this;return u()(l.a.mark(function t(){var a,i,n,s,o,r,c,u,p,d,m,y,h,_,b,g,k;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},i=e.activityInfo,n=i.time,s=i.name,o=i.keepTime,r=i.score,c=i.coachId,u=i.actDesc,p=i.scoreType,d=i.scoreShowType,m=i.type,y=i.bgImgUrl,h=i.iconUrl,_=i.price,b=i.check,g=i.gif_url,"1"!==m){t.next=8;break}if(n.length&&s&&o&&r&&c&&m){t.next=6;break}return e.$message({message:"必填项不能为空",type:"error"}),t.abrupt("return");case 6:t.next=12;break;case 8:if(n.length&&s&&m&&_&&y&&h){t.next=11;break}return e.$message({message:"必填项不能为空",type:"error"}),t.abrupt("return");case 11:a.gif_url=g;case 12:return a.set_start_time=n[0]/1e3,a.set_stop_time=n[1]/1e3,a.agent_id=Object(v.a)(),a.name=s,a.keep_time=o,a.score=r,a.coach_id=c,a.act_desc=u,a.score_type=p,a.score_show_type=d,a.type=m,a.bg_img=y,a.icon=h,a.money=_,b&&(a.keep_time=0),"2"===a.type&&(a.score=0,a.coach_id=0,a.score_show_type=0),"1"===a.type&&(a.money=0),t.prev=29,t.next=32,Object(f.a)(a);case 32:return k=t.sent,e.dialogFormDisable=!0,e.activityId=k.data,t.next=37,e._fetchTaskList(k.data);case 37:e.$message({message:"创建成功",type:"success"}),t.next=45;break;case 40:return t.prev=40,t.t0=t.catch(29),e.handleCloseDialog(),t.next=45,e._fetchActivityList();case 45:case"end":return t.stop()}},t,e,[[29,40]])}))()},handelCreateTaskSubmit:function(){var e=this;return u()(l.a.mark(function t(){var a,i,s,o,c,u;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.activityId,i=e.taskInfo,s=i.name,o=i.score,c=i.seq,s&&o&&c){t.next=5;break}return e.$message({message:"必填项不能为空",type:"error"}),t.abrupt("return");case 5:if((u=n()({},e.taskInfo,{activity_id:a})).answer=r()(u.answer),"1"!==u.type){t.next=15;break}if(u.options.A&&u.options.B&&u.options.C&&u.options.D){t.next=11;break}return e.$message({message:"选项不能为空",type:"error"}),t.abrupt("return");case 11:if(console.log(u.answer),u.answer.length){t.next=15;break}return e.$message({message:"请填写答案",type:"error"}),t.abrupt("return");case 15:if("3"!==u.type){t.next=24;break}if(u.options=[],e.taskAFileList.forEach(function(e){u.options.push(e.url)}),!(u.options.length<9)){t.next=21;break}return e.$message({message:"请上传九张图片",type:"error"}),t.abrupt("return");case 21:if(u.answer.length){t.next=24;break}return e.$message({message:"请填写答案",type:"error"}),t.abrupt("return");case 24:if(u.options=r()(u.options),"2"!==u.type){t.next=30;break}if(u.answer2){t.next=29;break}return e.$message({message:"答案不能为空",type:"error"}),t.abrupt("return");case 29:u.answer=u.answer2;case 30:if("4"!==u.type){t.next=35;break}if(u.answer_url){t.next=34;break}return e.$message({message:"请上传视频",type:"error"}),t.abrupt("return");case 34:u.answer=u.answer_url;case 35:if("5"!==u.type){t.next=40;break}if(u.answer_url){t.next=39;break}return e.$message({message:"请上传音频",type:"error"}),t.abrupt("return");case 39:u.answer=u.answer_url;case 40:if("6"!==u.type){t.next=45;break}if(u.answer_url){t.next=44;break}return e.$message({message:"请上传拍照图片",type:"error"}),t.abrupt("return");case 44:u.answer=u.answer_url;case 45:return u.limit_time||delete u.limit_time,t.prev=46,t.next=49,Object(f.b)(r()(u));case 49:t.sent,e.$message({message:"添加成功",type:"success"}),e.dialogTaskVisible=!1,e._fetchTaskList(a),t.next=57;break;case 55:t.prev=55,t.t0=t.catch(46);case 57:case"end":return t.stop()}},t,e,[[46,55]])}))()},_fetchActivityList:function(){var e=this;return u()(l.a.mark(function t(){var a,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,Object(f.k)(e.listQuery);case 4:a=t.sent,i=a.data,e.listLoading=!1,e.list=i,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.listLoading=!1;case 13:case"end":return t.stop()}},t,e,[[1,10]])}))()},_fetchTaskList:function(e){var t=this;return u()(l.a.mark(function a(){var i,n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(f.o)({activity_id:e});case 2:i=a.sent,(n=i.data)||(n=[]),t.taskList=n;case 6:case"end":return a.stop()}},a,t)}))()},_resetActivityInfo:function(){this.activityInfo={agentName:Object(v.b)(),type:"",coachId:"",name:"",keepTime:"",score:"",scoreType:"",scoreShowType:"",time:"",actDesc:"",bgImgUrl:"",iconUrl:"",price:"",check:"",gif_url:""},this.iconFilelist=[],this.bgFileList=[],this.gifFileList=[]},_resetTaskInfo:function(){this.taskInfo={name:null,type:"1",desc:null,answer_type:"1",seq:null,question_img:null,options:{A:null,B:null,C:null,D:null},answer:[],answer2:"",answer_url:"",score:null,answer_limit:1,limit_time:""},this.taskQFileList=[],this.taskAFileList=[]},_restCheckInfo:function(){this.checkInfo={name:null,activity_status:null,set_start_time:null,set_stop_time:null,money:null},this.set_start_time="",this.set_stop_time=""},init:function(){this._fetchCoachList(),this._fetchActivityList()}}},g=(a("hoD4"),a("KHd+")),k=Object(g.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入运营商名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.listQuery.agent_name,callback:function(t){e.$set(e.listQuery,"agent_name",t)},expression:"listQuery.agent_name"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入活动名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请选择活动类型",clearable:""},on:{change:e.handleFilter},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},e._l(e.activities,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请选择活动状态",clearable:""},on:{change:e.handleFilter},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.status,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),e.showable?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreateActivity}},[e._v("新增活动")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"运营商",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.agent_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"活动名称","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"游戏类型",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("activityFilter")(t.row.type)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"活动封面",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{display:"block",width:"40px",height:"40px",margin:"0 auto"},attrs:{src:e.row.icon,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"活动时间",align:"center",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.keep_time)+"分钟")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"初始分值",align:"center",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.score))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"活动状态","class-name":"status-col",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.activity_status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"130","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.activity_status&&"6"!==t.row.activity_status||!e.showable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleEditActivity(t.row)}}},[e._v("修改")]),e._v(" "),"1"!==t.row.activity_status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handleShowActivityInfo(t.row)}}},[e._v("查看")]):e._e(),e._v(" "),"1"===t.row.activity_status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleCheckActivity(t.row)}}},[e._v("去审批")]):e._e(),e._v(" "),5===t.row.activity_status||"6"===t.row.activity_status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDeleteActivity(t.row.id)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{staticClass:"aDialog",attrs:{visible:e.dialogFormVisible,title:e.dialogActivityTitle},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.handleCloseDialog}},[a("hr"),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.activityInfo,disabled:e.dialogFormDisable}},[a("el-form-item",{attrs:{label:"运营商名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.activityInfo.agentName,callback:function(t){e.$set(e.activityInfo,"agentName",t)},expression:"activityInfo.agentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动类型"}},[a("el-select",{on:{change:e.handleActivityChange},model:{value:e.activityInfo.type,callback:function(t){e.$set(e.activityInfo,"type",t)},expression:"activityInfo.type"}},[a("el-option",{attrs:{label:"团队-基础版",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"个人-基础版",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择教练"}},[a("el-select",{attrs:{disabled:!e.activityInfo.type||"2"===e.activityInfo.type},model:{value:e.activityInfo.coachId,callback:function(t){e.$set(e.activityInfo,"coachId",t)},expression:"activityInfo.coachId"}},e._l(e.coachList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{model:{value:e.activityInfo.name,callback:function(t){e.$set(e.activityInfo,"name",t)},expression:"activityInfo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分值形式"}},[a("el-select",{model:{value:e.activityInfo.scoreType,callback:function(t){e.$set(e.activityInfo,"scoreType",t)},expression:"activityInfo.scoreType"}},[a("el-option",{attrs:{label:"积分",value:"1"}}),e._v(" "),"1"===e.activityInfo.type?a("el-option",{attrs:{label:"钻石",value:"2"}}):e._e(),e._v(" "),"1"===e.activityInfo.type?a("el-option",{attrs:{label:"花瓣",value:"3"}}):e._e(),e._v(" "),"1"===e.activityInfo.type?a("el-option",{attrs:{label:"游戏币",value:"4"}}):e._e()],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"可见分数"}},[a("el-select",{attrs:{disabled:!e.activityInfo.type||"2"===e.activityInfo.type},model:{value:e.activityInfo.scoreShowType,callback:function(t){e.$set(e.activityInfo,"scoreShowType",t)},expression:"activityInfo.scoreShowType"}},[a("el-option",{attrs:{label:"否",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"是",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"起始分值"}},[a("el-input",{attrs:{disabled:!e.activityInfo.type||"2"===e.activityInfo.type,onkeypress:"return event.keyCode ? event.keyCode>=48 && event.keyCode<=57 : event.which >= 48 && event.which <= 57"},model:{value:e.activityInfo.score,callback:function(t){e.$set(e.activityInfo,"score",t)},expression:"activityInfo.score"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时长"}},[a("el-input",{attrs:{disabled:e.checkdisabled,onkeypress:"return event.keyCode>=48&&event.keyCode<=57"},model:{value:e.activityInfo.keepTime,callback:function(t){e.$set(e.activityInfo,"keepTime",t)},expression:"activityInfo.keepTime"}},[a("div",{attrs:{slot:"suffix"},slot:"suffix"},["2"===e.activityInfo.type?a("el-checkbox",{on:{change:e.handleCheckedChange},model:{value:e.activityInfo.check,callback:function(t){e.$set(e.activityInfo,"check",t)},expression:"activityInfo.check"}},[e._v("长期")]):e._e(),e._v("\n            (分钟)\n          ")],1)])],1),e._v(" "),"2"===e.activityInfo.type?a("el-form-item",{attrs:{label:"活动价格"}},[a("el-input",{attrs:{onkeypress:"return event.keyCode>=48&&event.keyCode<=57"},model:{value:e.activityInfo.price,callback:function(t){e.$set(e.activityInfo,"price",t)},expression:"activityInfo.price"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"起止时间"}},["2"!==e.activityInfo.type?a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"timestamp"},model:{value:e.activityInfo.time,callback:function(t){e.$set(e.activityInfo,"time",t)},expression:"activityInfo.time"}}):e._e(),e._v(" "),"2"===e.activityInfo.type?a("el-time-picker",{attrs:{"is-range":"","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"timestamp"},model:{value:e.activityInfo.time,callback:function(t){e.$set(e.activityInfo,"time",t)},expression:"activityInfo.time"}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"活动描述"}},[a("el-input",{staticClass:"act-textarea",attrs:{autosize:{minRows:1},type:"textarea",maxlength:"300"},model:{value:e.activityInfo.actDesc,callback:function(t){e.$set(e.activityInfo,"actDesc",t)},expression:"activityInfo.actDesc"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"活动封面"}},[a("el-upload",{attrs:{"http-request":e.handleUpLoadIconImg,"on-preview":e.handleIconCardPreview,limit:1,action:e.domain,"file-list":e.iconFilelist,"list-type":"picture-card"}},[a("el-button",[e._v("上传图片")])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{src:e.dialogImageUrl,width:"100%",alt:""}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"活动背景"}},[a("el-upload",{attrs:{"http-request":e.handleUpLoadBgImg,"on-preview":e.handleBgCardPreview,limit:1,action:e.domain,"file-list":e.bgFileList,"list-type":"picture-card"}},[a("el-button",[e._v("上传图片")])],1)],1),e._v(" "),"2"===e.activityInfo.type?a("el-form-item",{attrs:{label:"活动提示"}},[a("el-upload",{attrs:{"http-request":e.handleUpLoadGifImg,"on-preview":e.handleGifCardPreview,limit:1,action:e.domain,"file-list":e.gifFileList,"list-type":"picture-card"}},[a("el-button",[e._v("上传图片")])],1)],1):e._e()],1),e._v(" "),a("el-form-item",["add"===e.dialogActivitytype?a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateActivitySubmit}},[e._v("创建活动")]):e._e(),e._v(" "),"edit"===e.dialogActivitytype?a("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdateActivitySubmit}},[e._v("修改活动")]):e._e()],1)],1),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"job-list"},[a("div",{staticClass:"job-title"},[a("h3",{staticStyle:{display:"inline-block"}},[e._v("任务列表")]),e._v(" "),a("div",{staticClass:"filePicker",staticStyle:{float:"right"},attrs:{disabled:!e.activityId}},[a("label",[e._v("导入任务")]),e._v(" "),a("input",{attrs:{id:"fileInput",disabled:!e.activityId,type:"file",name:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:e.handleFileChange}})]),e._v(" "),a("div",{staticClass:"filePicker",staticStyle:{float:"right","margin-right":"20px"},attrs:{disabled:!e.activityId}},[a("label",[e._v("导入图片")]),e._v(" "),a("input",{attrs:{id:"ImgInput",disabled:!e.activityId,type:"file",name:"file",multiple:""},on:{change:e.handleImgChange}})]),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{disabled:!e.activityId,type:"primary"},on:{click:e.handleOpenTaskDialog}},[e._v("添加任务")])],1),e._v(" "),a("div",{staticClass:"job-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.taskList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"题目标题",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.task_desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"答案",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.answer))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"题目类型",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("typeFilter")(t.row.type)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分值",align:"center",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.score))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"答题类型",align:"center",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("answerTypeFilter")(t.row.answer_type)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"130","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.handleUpdateTask(t.row)}}},[e._v("修改")])]}}])})],1)],1)])],1),e._v(" "),a("el-dialog",{staticClass:"activityDialog",attrs:{visible:e.dialogTaskVisible,title:e.dialogTaskTitle},on:{"update:visible":function(t){e.dialogTaskVisible=t},close:e.handleCloseTaskDialog}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.taskInfo}},[a("el-form-item",{attrs:{label:"题目标题","label-width":"100px"}},[a("el-input",{model:{value:e.taskInfo.name,callback:function(t){e.$set(e.taskInfo,"name",t)},expression:"taskInfo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"题目类型","label-width":"100px"}},[a("el-select",{attrs:{disabled:"edit"===e.dialogTaskType},on:{change:e.taskTypeChange},model:{value:e.taskInfo.type,callback:function(t){e.$set(e.taskInfo,"type",t)},expression:"taskInfo.type"}},[a("el-option",{attrs:{label:"选择题",value:"1"}}),e._v(" "),"1"===e.activityInfo.type||"1"===e.checkInfo.type?a("el-option",{attrs:{label:"文字题",value:"2"}}):e._e(),e._v(" "),a("el-option",{attrs:{label:"图片题",value:"3"}}),e._v(" "),"1"===e.activityInfo.type||"1"===e.checkInfo.type?a("el-option",{attrs:{label:"视频题",value:"4"}}):e._e(),e._v(" "),"1"===e.activityInfo.type||"1"===e.checkInfo.type?a("el-option",{attrs:{label:"语音题",value:"5"}}):e._e(),e._v(" "),"1"===e.activityInfo.type||"1"===e.checkInfo.type?a("el-option",{attrs:{label:"拍照题",value:"6"}}):e._e()],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"题目描述","label-width":"100px"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.taskInfo.desc,callback:function(t){e.$set(e.taskInfo,"desc",t)},expression:"taskInfo.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"题目分值","label-width":"100px"}},[a("el-input",{attrs:{type:"number"},model:{value:e.taskInfo.score,callback:function(t){e.$set(e.taskInfo,"score",t)},expression:"taskInfo.score"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"答题类型","label-width":"100px"}},[a("el-select",{attrs:{disabled:"edit"===e.dialogTaskType},on:{change:e.answerTypeChange},model:{value:e.taskInfo.answer_type,callback:function(t){e.$set(e.taskInfo,"answer_type",t)},expression:"taskInfo.answer_type"}},[a("el-option",{attrs:{label:"普通题",value:"1"}}),e._v(" "),"1"===e.taskInfo.type||"3"===e.taskInfo.type?a("el-option",{attrs:{label:"关卡题",value:"2"}}):e._e(),e._v(" "),"1"!==e.activityInfo.type&&"1"!==e.checkInfo.type||"1"!==e.taskInfo.type&&"3"!==e.taskInfo.type?e._e():a("el-option",{attrs:{label:"团队限时题",value:"3"}}),e._v(" "),"1"!==e.activityInfo.type&&"1"!==e.checkInfo.type||"1"!==e.taskInfo.type&&"3"!==e.taskInfo.type?e._e():a("el-option",{attrs:{label:"活动抢答题",value:"4"}})],1)],1),e._v(" "),"3"===e.taskInfo.answer_type?a("el-form-item",{attrs:{label:"答题时间","label-width":"100px"}},[a("el-input",{attrs:{type:"number"},model:{value:e.taskInfo.limit_time,callback:function(t){e.$set(e.taskInfo,"limit_time",t)},expression:"taskInfo.limit_time"}},[a("div",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("(秒)")])])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"题目顺序","label-width":"100px"}},[a("el-input",{attrs:{type:"number"},model:{value:e.taskInfo.seq,callback:function(t){e.$set(e.taskInfo,"seq",t)},expression:"taskInfo.seq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"答题人数","label-width":"100px"}},[a("el-input",{attrs:{disabled:"2"===e.activityInfo.type||"4"===e.taskInfo.answer_type||"1"!==e.taskInfo.type&&"3"!==e.taskInfo.type,type:"number"},model:{value:e.taskInfo.answer_limit,callback:function(t){e.$set(e.taskInfo,"answer_limit",t)},expression:"taskInfo.answer_limit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"题目图片","label-width":"100px"}},[a("el-upload",{attrs:{"http-request":e.handleUpLoadTaksImg,"on-preview":e.handleTaskImgPreview,limit:1,action:e.domain,"file-list":e.taskQFileList,"list-type":"picture-card"}},[a("el-button",[e._v("上传图片")])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogTaskImgVisible},on:{"update:visible":function(t){e.dialogTaskImgVisible=t}}},[a("img",{attrs:{src:e.dialogTaskImageUrl,width:"100%",alt:""}})])],1),e._v(" "),"1"===e.taskInfo.type?[a("el-form-item",{attrs:{label:"题目选项","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入选项内容"},model:{value:e.taskInfo.options.A,callback:function(t){e.$set(e.taskInfo.options,"A",t)},expression:"taskInfo.options.A"}},[a("template",{slot:"prepend"},[e._v("A")])],2),e._v(" "),a("el-input",{attrs:{placeholder:"请输入选项内容"},model:{value:e.taskInfo.options.B,callback:function(t){e.$set(e.taskInfo.options,"B",t)},expression:"taskInfo.options.B"}},[a("template",{slot:"prepend"},[e._v("B")])],2),e._v(" "),a("el-input",{attrs:{placeholder:"请输入选项内容"},model:{value:e.taskInfo.options.C,callback:function(t){e.$set(e.taskInfo.options,"C",t)},expression:"taskInfo.options.C"}},[a("template",{slot:"prepend"},[e._v("C")])],2),e._v(" "),a("el-input",{attrs:{placeholder:"请输入选项内容"},model:{value:e.taskInfo.options.D,callback:function(t){e.$set(e.taskInfo.options,"D",t)},expression:"taskInfo.options.D"}},[a("template",{slot:"prepend"},[e._v("D")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"答案","label-width":"100px"}},[a("el-checkbox-group",{model:{value:e.taskInfo.answer,callback:function(t){e.$set(e.taskInfo,"answer",t)},expression:"taskInfo.answer"}},[a("el-checkbox",{attrs:{label:"A"}}),e._v(" "),a("el-checkbox",{attrs:{label:"B"}}),e._v(" "),a("el-checkbox",{attrs:{label:"C"}}),e._v(" "),a("el-checkbox",{attrs:{label:"D"}})],1)],1)]:e._e(),e._v(" "),"2"===e.taskInfo.type?[a("el-form-item",{attrs:{label:"答案","label-width":"100px"}},[a("el-input",{model:{value:e.taskInfo.answer2,callback:function(t){e.$set(e.taskInfo,"answer2",t)},expression:"taskInfo.answer2"}})],1)]:e._e(),e._v(" "),"3"===e.taskInfo.type?[a("el-form-item",{attrs:{label:"九宫格图片","label-width":"100px"}},[a("el-upload",{attrs:{"http-request":e.handleUpLoadNineImg,"on-preview":e.handleNineImgPreview,"on-remove":e.handleRemove,limit:9,action:e.domain,"file-list":e.taskAFileList,multiple:"","list-type":"picture"}},[a("el-button",[e._v("上传图片")])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogNineVisible},on:{"update:visible":function(t){e.dialogNineVisible=t}}},[a("img",{attrs:{src:e.nineImageUrl,width:"100%",alt:""}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"答案","label-width":"100px"}},[a("el-checkbox-group",{model:{value:e.taskInfo.answer,callback:function(t){e.$set(e.taskInfo,"answer",t)},expression:"taskInfo.answer"}},[a("el-checkbox",{attrs:{label:"1"}}),e._v(" "),a("el-checkbox",{attrs:{label:"2"}}),e._v(" "),a("el-checkbox",{attrs:{label:"3"}}),e._v(" "),a("el-checkbox",{attrs:{label:"4"}}),e._v(" "),a("el-checkbox",{attrs:{label:"5"}}),e._v(" "),a("el-checkbox",{attrs:{label:"6"}}),e._v(" "),a("el-checkbox",{attrs:{label:"7"}}),e._v(" "),a("el-checkbox",{attrs:{label:"8"}}),e._v(" "),a("el-checkbox",{attrs:{label:"9"}})],1)],1)]:e._e(),e._v(" "),"4"===e.taskInfo.type?[a("el-form-item",{attrs:{label:"题目视频","label-width":"100px"}},[a("el-upload",{attrs:{"http-request":e.handleUpLoadAnswerImg,"on-preview":e.handleAnswerImgPreview,limit:1,action:e.domain,"file-list":e.taskAFileList}},[a("el-button",[e._v("上传视频")])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogAnswerImgVisible},on:{"update:visible":function(t){e.dialogAnswerImgVisible=t}}},[a("video",{attrs:{src:e.dialogAnswerImageUrl,controls:"",autoplay:"",width:"100%"}})])],1)]:e._e(),e._v(" "),"5"===e.taskInfo.type?[a("el-form-item",{attrs:{label:"题目语音","label-width":"100px"}},[a("el-upload",{attrs:{"http-request":e.handleUpLoadAnswerImg,"on-preview":e.handleAnswerImgPreview,limit:1,action:e.domain,"file-list":e.taskAFileList}},[a("el-button",[e._v("上传音频")])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogAnswerImgVisible},on:{"update:visible":function(t){e.dialogAnswerImgVisible=t}}},[a("video",{attrs:{src:e.dialogAnswerImageUrl,controls:"",autoplay:"",width:"100%"}})])],1)]:e._e(),e._v(" "),"6"===e.taskInfo.type?[a("el-form-item",{attrs:{label:"拍照图片","label-width":"100px"}},[a("el-upload",{attrs:{"http-request":e.handleUpLoadAnswerImg,"on-preview":e.handleAnswerImgPreview,limit:1,action:e.domain,"file-list":e.taskAFileList,"list-type":"picture-card"}},[a("el-button",[e._v("上传图片")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogAnswerImgVisible},on:{"update:visible":function(t){e.dialogAnswerImgVisible=t}}},[a("img",{attrs:{src:e.dialogAnswerImageUrl,width:"100%",alt:""}})])]:e._e(),e._v(" "),a("el-form-item",[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:e.handleCloseTaskDialog}},[e._v("取消")]),e._v(" "),"add"===e.dialogTaskType?a("el-button",{attrs:{type:"primary"},on:{click:e.handelCreateTaskSubmit}},[e._v("添加题目")]):e._e(),e._v(" "),"edit"===e.dialogTaskType?a("el-button",{attrs:{type:"primary"},on:{click:e.handelUpdateTaskSubmit}},[e._v("修改题目")]):e._e()],1)])],2)],1),e._v(" "),a("el-dialog",{staticClass:"activityDialog",attrs:{visible:e.dialogCheckVisible,fullscreen:""},on:{"update:visible":function(t){e.dialogCheckVisible=t},close:e.handleCloseCheckDialog}},[a("hr"),e._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("h3",[e._v("\n        "+e._s(e.dialogTitle)+"\n        "),"check"===e.dialogType?a("el-button",{on:{click:e.handelAuditact}},[e._v("不通过")]):e._e(),e._v(" "),"check"===e.dialogType?a("el-button",{attrs:{type:"primary"},on:{click:e.handleCheckPass}},[e._v("通过")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"info clearfix"},[a("div",{staticClass:"info-tab-left",staticStyle:{width:"50%",float:"left"}},[a("h4",[e._v("活动信息")]),e._v(" "),a("el-form",{model:{value:e.checkInfo,callback:function(t){e.checkInfo=t},expression:"checkInfo"}},[a("el-form-item",{attrs:{label:"活动名称","label-width":"100px"}},[a("span",[e._v(e._s(e.checkInfo.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"活动类型","label-width":"100px"}},[a("span",[e._v(e._s(e._f("activityFilter")(e.checkInfo.type)))])]),e._v(" "),a("el-form-item",{attrs:{label:"开始时间","label-width":"100px"}},[a("span",[e._v(e._s(e._f("timeFilter")(e.checkInfo.set_start_time)))])]),e._v(" "),a("el-form-item",{attrs:{label:"结束时间","label-width":"100px"}},[a("span",[e._v(e._s(e._f("timeFilter")(e.checkInfo.set_stop_time)))]),e._v(" "),"edit"===e.dialogType?a("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdateActivity}},[e._v("修改活动")]):e._e()],1)],1)],1),e._v(" "),a("div",{staticClass:"info-tab-right",staticStyle:{width:"50%",float:"right"}},[a("h4",[e._v("活动二维码")]),e._v(" "),a("div",{staticClass:"er-img",staticStyle:{width:"160px",height:"160px",margin:"0 auto",border:"1px solid #ccc","margin-top":"20px"}},[e.checkInfo.qcode_url?e._e():a("span",{staticStyle:{color:"red","font-size":"18px"}},[e._v("活动审批完成后创建二维码")]),e._v(" "),a("img",{staticStyle:{height:"158px",width:"158px"},attrs:{src:e.checkInfo.qcode_url,alt:""}}),e._v(" "),a("p",{staticStyle:{"text-align":"center",color:"red","font-weight":"500"}},[e._v(e._s(e.checkInfo.name))])])])]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"job-list"},[a("div",{staticClass:"job-title"},[a("h3",{staticStyle:{display:"inline-block"}},[e._v("任务列表")])]),e._v(" "),a("div",{staticClass:"job-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.taskList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"题目标题",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.task_desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"答案",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.answer))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"题目类型",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("typeFilter")(t.row.type)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分值",align:"center",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.score))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"答题类型",align:"center",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("answerTypeFilter")(t.row.answer_type)))])]}}])}),e._v(" "),"edit"==e.dialogType?a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"130","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.handleUpdateTask(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.handleClickTask(t.row.id)}}},[e._v("删除")])]}}])}):e._e()],1)],1)])]),e._v(" "),a("el-dialog",{staticClass:"activityDialog",attrs:{visible:e.dialogReasonVisible,title:"不通过原因"},on:{"update:visible":function(t){e.dialogReasonVisible=t},close:e.handleCloseReasonDialog}},[a("el-form",[a("el-form-item",[a("el-input",{attrs:{type:"textarea"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.handleCloseReasonDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCancelActivity}},[e._v("确认")])],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"activityDialog",attrs:{visible:e.dialogPayVisible,title:"活动付费(点击确定扫描右侧二维码)"},on:{"update:visible":function(t){e.dialogPayVisible=t},close:e.handleClosePayDialog}},[a("hr"),e._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticStyle:{float:"left"}},[a("el-form",{model:{value:e.checkInfo,callback:function(t){e.checkInfo=t},expression:"checkInfo"}},[a("el-form-item",{attrs:{label:"支付方式","label-width":"100px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.payType,callback:function(t){e.payType=t},expression:"payType"}},[e._v("微信支付")]),e._v(" "),a("el-radio",{attrs:{label:"4"},model:{value:e.payType,callback:function(t){e.payType=t},expression:"payType"}},[e._v("余额支付")])],1),e._v(" "),a("el-form-item",{attrs:{label:"活动名称","label-width":"100px"}},[a("span",[e._v(e._s(e.checkInfo.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"活动类型","label-width":"100px"}},[a("span",[e._v(e._s(e._f("activityFilter")(e.checkInfo.type)))])]),e._v(" "),a("el-form-item",{attrs:{label:"活动金额","label-width":"100px"}},[a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.payMoney)+"元")])])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleGetPayEr}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleGobackActivityList}},[e._v("支付完成返回列表")])],1)],1),e._v(" "),a("div",{staticStyle:{float:"right",width:"50%"}},[a("div",{staticClass:"er",staticStyle:{height:"180px",width:"180px",margin:"0 auto","margin-top":"40px"}},[a("img",{attrs:{src:e.pay_er_img,alt:""}})])])])])],1)},[],!1,null,null,null);k.options.__file="activityManage.vue";t.default=k.exports},"8SHQ":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var i="http://cdnimg.bxunion.com"},NhRW:function(e,t,a){},ZySA:function(e,t,a){"use strict";var i=a("P2sY"),n=a.n(i),s=(a("jUE0"),{bind:function(e,t){e.addEventListener("click",function(a){var i=n()({},t.value),s=n()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),l=s.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var o=l.getBoundingClientRect(),r=l.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":((r=document.createElement("span")).className="waves-ripple",r.style.height=r.style.width=Math.max(o.width,o.height)+"px",l.appendChild(r)),s.type){case"center":r.style.top=o.height/2-r.offsetHeight/2+"px",r.style.left=o.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-o.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-o.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=s.color,r.className="waves-ripple z-active",!1}},!1)}}),l=function(e){e.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(l)),s.install=l;t.a=s},"gDS+":function(e,t,a){e.exports={default:a("oh+g"),__esModule:!0}},hoD4:function(e,t,a){"use strict";var i=a("NhRW");a.n(i).a},jUE0:function(e,t,a){},"oh+g":function(e,t,a){var i=a("WEpk"),n=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},zK94:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"k",function(){return s}),a.d(t,"l",function(){return l}),a.d(t,"h",function(){return o}),a.d(t,"o",function(){return r}),a.d(t,"b",function(){return c}),a.d(t,"j",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"e",function(){return d}),a.d(t,"q",function(){return f}),a.d(t,"r",function(){return m}),a.d(t,"f",function(){return v}),a.d(t,"i",function(){return y}),a.d(t,"m",function(){return h}),a.d(t,"p",function(){return _}),a.d(t,"n",function(){return b}),a.d(t,"g",function(){return g}),a.d(t,"c",function(){return k}),a.d(t,"s",function(){return I});var i=a("t3Un");function n(e){return Object(i.a)({url:"/i/topteam/admin/addactivity",method:"post",data:e})}function s(e){return Object(i.a)({url:"/i/topteam/admin/GetActivityList",method:"post",data:e})}function l(){return Object(i.a)({url:"/i/topteam/admin/getcoachlist",method:"get"})}function o(e){return Object(i.a)({url:"/i/topteam/admin/delactivity?act_id="+e,method:"get"})}function r(e){return Object(i.a)({url:"/i/topteam/admin/GetTaskList",method:"post",data:e})}function c(e){return Object(i.a)({url:"i/topteam/admin/addTask",method:"post",data:e})}function u(e){return Object(i.a)({url:"/i/topteam/admin/getactivityinfo",method:"post",data:e})}function p(e){return Object(i.a)({url:"/i/topteam/admin/auditact",method:"post",data:e})}function d(e){return Object(i.a)({url:"/i/topteam/api/createorder",method:"post",data:e})}function f(e){return Object(i.a)({url:"/i/topteam/api/getpayinfo",method:"post",data:e})}function m(e){return Object(i.a)({url:"/i/topteam/admin/updateactivity",method:"post",data:e})}function v(e){return Object(i.a)({url:"/i/topteam/admin/delTask?id="+e,method:"get"})}function y(e){return Object(i.a)({url:"/i/topteam/admin/ModifyTask",method:"post",data:e})}function h(e){return Object(i.a)({url:"/i/topteam/admin/GetActivityList",method:"post",data:e})}function _(e){return Object(i.a)({url:"/i/topteam/admin/getactteamloginfo?act_id="+e,method:"get"})}function b(e){return Object(i.a)({url:"/i/topteam/admin/getTaskLibList",method:"post",data:e})}function g(e){return Object(i.a)({url:"/i/topteam/admin/delTaskLib?id="+e,method:"get"})}function k(e){return Object(i.a)({url:"/i/topteam/admin/addTaskLib",method:"post",data:e})}function I(e){return Object(i.a)({url:"/i/topteam/admin/addTaskLib",method:"post",data:e})}}}]);