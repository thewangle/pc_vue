(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2865"],{"0xGk":function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"d",function(){return s}),i.d(t,"e",function(){return o}),i.d(t,"f",function(){return c}),i.d(t,"c",function(){return r}),i.d(t,"b",function(){return u});var l=i("f0Pt"),a=i.n(l);function n(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/addsort",e)}function s(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/getsortinfo",e)}function o(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/getsortinfoall",e)}function c(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/getsortinfoone",e)}function r(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/editsortinfo",e)}function u(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/deletesort",e)}},21:function(e,t){},22:function(e,t){},23:function(e,t){},DP6j:function(e,t,i){"use strict";var l=i("EsH2");i.n(l).a},EsH2:function(e,t,i){},hLGN:function(e,t,i){"use strict";i.r(t);var l=i("cLjf"),a=i.n(l),n=i("hDQ3"),s=i.n(n),o=(i("f0Pt"),i("3rzS"),i("X4fA")),c=(i("a/LZ"),i("xA6U")),r=i("0xGk"),u=i("prnK"),f=i("AJLq"),d=i.n(f),p={name:"Dashboard",data:function(){return{isgz:!1,zcInprice:0,zcOutprice:0,ispricein:!0,ispriceout:!0,years:1,sorts:[],suppliers:[],listLoading:!1,list:[],listQuery:{page_no:1,page_size:10,name:"",code:"",sortid:"",supplierid:"",role:Object(o.a)(),uid:Object(o.d)(),pid:Object(o.f)()},total:1,dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,dialogrenewalfee:!1,table_info:{},table_info1:{},table_info2:{},numtypes:[{value:1,label:"售出"},{value:2,label:"退货"},{value:3,label:"报损"},{value:4,label:"新入库"}],dates:[{value:1,label:"星期一"},{value:2,label:"星期二"},{value:3,label:"星期三"},{value:4,label:"星期四"},{value:5,label:"星期五"},{value:6,label:"星期六"},{value:7,label:"星期天"}],times:[{value:1,label:"1:00"},{value:2,label:"2:00"},{value:3,label:"3:00"},{value:4,label:"4:00"},{value:5,label:"5:00"},{value:6,label:"6:00"},{value:7,label:"7:00"},{value:8,label:"8:00"},{value:9,label:"9:00"},{value:10,label:"10:00"},{value:11,label:"11:00"},{value:12,label:"12:00"},{value:13,label:"13:00"},{value:14,label:"14:00"},{value:15,label:"15:00"},{value:16,label:"16:00"},{value:17,label:"17:00"},{value:18,label:"18:00"},{value:19,label:"19:00"},{value:20,label:"20:00"},{value:21,label:"21:00"},{value:22,label:"22:00"},{value:23,label:"23:00"},{value:24,label:"24:00"}],pricesortList:[{value:1,label:"进价"},{value:2,label:"售价"}]}},mounted:function(){this.handleFilter(),this.getsortinfoall(),this.getsupplierall(),3==Object(o.a)()&&(this.isgz=!0)},computed:{},methods:{toExcle:function(){var e=d.a.utils.table_to_book(document.getElementById("out-table"));d.a.writeFile(e,"商品列表.xlsx")},pricesortSelect:function(e){1==e&&(this.ispricein=!1,this.ispriceout=!0,this.table_info1.outprice=this.zcOutprice),2==e&&(this.ispricein=!0,this.ispriceout=!1,this.table_info1.inprice=this.zcInprice)},getsortinfoall:function(){var e=this,t={role:Object(o.a)(),uid:Object(o.d)(),pid:Object(o.f)()};Object(r.e)(t).then(function(t){t.data.forEach(function(t){e.sorts.push({value:t.id,label:t.name})})}).catch(function(e){console.log(e)})},getsupplierall:function(){var e=this,t={role:Object(o.a)(),uid:Object(o.d)(),pid:Object(o.f)()};Object(u.d)(t).then(function(t){t.data.forEach(function(t){e.suppliers.push({value:t.id,label:t.name})})}).catch(function(e){console.log(e)})},handleShowDetial:function(e){this.table_info=e,this.dialogVisible=!0},handleShowprice:function(e){this.table_info1=e,this.zcInprice=e.inprice,this.zcOutprice=e.outprice,this.dialogVisible1=!0},handleShownums:function(e){this.table_info2=e,this.table_info2.inpricenow=e.inprice,this.table_info2.outpricenow=e.outprice,this.table_info2.changenums=1,this.dialogVisible2=!0},editegoodsinfo:function(){var e=this;if(""!=this.table_info.name&&""!=this.table_info.format&&""!=this.table_info.sortid&&""!=this.table_info.supplierid){var t=/^\+?[1-9][0-9]*$/;t.test(this.table_info.maxnums)&&t.test(this.table_info.minnums)?Number(this.table_info.maxnums)<Number(this.table_info.minnums)?this.$message({message:"库存上线不得小于库存下线",type:"warning"}):(this.table_info.type=0,Object(c.c)(this.table_info).then(function(t){e.dialogVisible=!1,e.$message({type:"success",message:t.data.message}),e.table_info="",e._fetchActivityList()}).catch(function(t){e.$message("编辑商品失败!")})):this.$message({message:"请您输入正确的数量",type:"warning"})}else this.$message({message:"请您填写完整信息",type:"warning"})},editegoodsinfo1:function(){var e=this;""!=this.table_info1.inprice&&""!=this.table_info1.outprice?Number(this.table_info1.outprice)<Number(this.table_info1.inprice)?this.$message({message:"售价不得小于进价",type:"warning"}):(this.table_info1.type=1,Object(c.c)(this.table_info1).then(function(t){e.dialogVisible1=!1,e.$message({type:"success",message:t.data.message}),e.table_info1="",e._fetchActivityList()}).catch(function(t){e.$message("编辑商品失败!")})):this.$message({message:"请您填写完整信息",type:"warning"})},editegoodsinfo2:function(){var e=this;""!=this.table_info2.changenums&&""!=this.table_info2.numtype&&""!=this.table_info2.inpricenow&&""!=this.table_info2.outpricenow?this.table_info2.date&&this.table_info2.time?(this.table_info2.type=2,Object(c.c)(this.table_info2).then(function(t){e.dialogVisible2=!1,e.$message({type:"success",message:t.data.message}),e.table_info2="",e._fetchActivityList()}).catch(function(t){e.$message("编辑商品失败!")})):this.$message({message:"请您选择日期和时间",type:"warning"}):this.$message({message:"请您填写完整信息",type:"warning"})},renewalfee:function(e){this.table_info=e,this.dialogrenewalfee=!0},copyTask:function(e){var t=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i={id:e.id};Object(c.b)(i).then(function(e){t.$message({type:"success",message:e.data.message}),t._fetchActivityList()}).catch(function(e){t.$message("删除失败")})}).catch(function(){})},handleSizeChange:function(e){this.listQuery.page_size=e,this._fetchActivityList()},handleCurrentChange:function(e){this.listQuery.page_no=e,this._fetchActivityList()},_fetchActivityList:function(){var e=this;return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.listLoading=!0,Object(c.d)(e.listQuery).then(function(t){var i=t.data;200==i.code&&(e.listLoading=!1,e.total=i.data.count,e.list=i.data.data,""==e.list&&e.$message({type:"warning",message:"没有更多商品!"})),201==i.code&&(e.list=[],e.listLoading=!1,e.$message("没有更多商品!"))}).catch(function(t){e.list=[],e.listLoading=!1,e.$message("获取商品信息失败")});case 2:case"end":return t.stop()}},t,e)}))()},handleFilter:function(){this.listQuery.page_no=1,this._fetchActivityList()},dialog_close:function(){this.table_info=""},dialogfee_close:function(){this.table_info=""}}},b=(i("DP6j"),i("ZrdR")),_=Object(b.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dashboard-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品编码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.listQuery.code,callback:function(t){e.$set(e.listQuery,"code",t)},expression:"listQuery.code"}}),e._v(" "),e.isgz?i("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请选择分类",clearable:""},on:{change:e.handleFilter},model:{value:e.listQuery.sortid,callback:function(t){e.$set(e.listQuery,"sortid",t)},expression:"listQuery.sortid"}},e._l(e.sorts,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})})):e._e(),e._v(" "),e.isgz?i("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请选择供应商",clearable:""},on:{change:e.handleFilter},model:{value:e.listQuery.supplierid,callback:function(t){e.$set(e.listQuery,"supplierid",t)},expression:"listQuery.supplierid"}},e._l(e.suppliers,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})})):e._e(),e._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.toExcle}},[e._v("导出")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"",stripe:"",id:"out-table","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"序号",align:"center",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品名称",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品编码","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品规格",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.format))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品数量",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.nums))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品进价",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.inprice)+" 元")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品售价",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.outprice)+" 元")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"毛利率",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(((t.row.outprice-t.row.inprice)/t.row.inprice*100).toFixed(2))+" %")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"添加时间",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.addtime))])]}}])}),e._v(" "),e.isgz?i("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"500","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){e.handleShowDetial(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){e.handleShowprice(t.row)}}},[e._v("进/售价")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){e.handleShownums(t.row)}}},[e._v("出/入库")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){e.copyTask(t.row)}}},[e._v("删除")])]}}])}):e._e()],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":e.listQuery.page_no,"page-sizes":[10,20,30,50],"page-size":e.listQuery.page_size,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,close:e.dialog_close,title:"商品编辑"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品名称")]),e._v(" "),i("el-input",{attrs:{autocomplete:"off"},model:{value:e.table_info.name,callback:function(t){e.$set(e.table_info,"name",t)},expression:"table_info.name"}})],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品编码")]),e._v(" "),i("el-input",{attrs:{autocomplete:"off"},model:{value:e.table_info.code,callback:function(t){e.$set(e.table_info,"code",t)},expression:"table_info.code"}})],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品分类")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择商品分类"},model:{value:e.table_info.sortid,callback:function(t){e.$set(e.table_info,"sortid",t)},expression:"table_info.sortid"}},e._l(e.sorts,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("供应商")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择供应商"},model:{value:e.table_info.supplierid,callback:function(t){e.$set(e.table_info,"supplierid",t)},expression:"table_info.supplierid"}},e._l(e.suppliers,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品规格")]),e._v(" "),i("el-input",{attrs:{autocomplete:"off"},model:{value:e.table_info.format,callback:function(t){e.$set(e.table_info,"format",t)},expression:"table_info.format"}})],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("库存上线")]),e._v(" "),i("el-input",{attrs:{autocomplete:"off"},model:{value:e.table_info.maxnums,callback:function(t){e.$set(e.table_info,"maxnums",t)},expression:"table_info.maxnums"}})],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("库存下线")]),e._v(" "),i("el-input",{attrs:{autocomplete:"off"},model:{value:e.table_info.minnums,callback:function(t){e.$set(e.table_info,"minnums",t)},expression:"table_info.minnums"}})],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品描述")]),e._v(" "),i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入商品描述"},model:{value:e.table_info.remark,callback:function(t){e.$set(e.table_info,"remark",t)},expression:"table_info.remark"}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editegoodsinfo}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible1,title:"进/售价更改"},on:{"update:visible":function(t){e.dialogVisible1=t}}},[i("div",{staticClass:"dialog_div"},[i("span",[e._v("更改类别")]),e._v(" "),i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择更改类别"},on:{change:e.pricesortSelect},model:{value:e.table_info1.pricesort,callback:function(t){e.$set(e.table_info1,"pricesort",t)},expression:"table_info1.pricesort"}},e._l(e.pricesortList,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品进价")]),e._v(" "),i("el-input",{staticStyle:{width:"300px"},attrs:{disabled:e.ispricein,autocomplete:"off"},model:{value:e.table_info1.inprice,callback:function(t){e.$set(e.table_info1,"inprice",t)},expression:"table_info1.inprice"}})],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品售价")]),e._v(" "),i("el-input",{staticStyle:{width:"300px"},attrs:{disabled:e.ispriceout,autocomplete:"off"},model:{value:e.table_info1.outprice,callback:function(t){e.$set(e.table_info1,"outprice",t)},expression:"table_info1.outprice"}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editegoodsinfo1}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible2,title:"出入库更改"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[i("div",{staticClass:"dialog_div"},[i("span",[e._v("出入库类别")]),e._v(" "),i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选出入库分类"},model:{value:e.table_info2.numtype,callback:function(t){e.$set(e.table_info2,"numtype",t)},expression:"table_info2.numtype"}},e._l(e.numtypes,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("增/减数量")]),e._v(" "),i("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off"},model:{value:e.table_info2.changenums,callback:function(t){e.$set(e.table_info2,"changenums",t)},expression:"table_info2.changenums"}})],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("日期选择")]),e._v(" "),i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择日期"},model:{value:e.table_info2.date,callback:function(t){e.$set(e.table_info2,"date",t)},expression:"table_info2.date"}},e._l(e.dates,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("时间选择")]),e._v(" "),i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择时间"},model:{value:e.table_info2.time,callback:function(t){e.$set(e.table_info2,"time",t)},expression:"table_info2.time"}},e._l(e.times,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品进价")]),e._v(" "),i("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off"},model:{value:e.table_info2.inpricenow,callback:function(t){e.$set(e.table_info2,"inpricenow",t)},expression:"table_info2.inpricenow"}})],1),e._v(" "),i("div",{staticClass:"dialog_div"},[i("span",[e._v("商品售价")]),e._v(" "),i("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off"},model:{value:e.table_info2.outpricenow,callback:function(t){e.$set(e.table_info2,"outpricenow",t)},expression:"table_info2.outpricenow"}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editegoodsinfo2}},[e._v("确 定")])],1)])],1)},[],!1,null,null,null);_.options.__file="goodslist.vue";t.default=_.exports},prnK:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"e",function(){return s}),i.d(t,"d",function(){return o}),i.d(t,"c",function(){return c}),i.d(t,"b",function(){return r});var l=i("f0Pt"),a=i.n(l);function n(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=supplier/addsupplier",e)}function s(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=supplier/getsupplierinfo",e)}function o(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=goods/getsupplierall",e)}function c(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=supplier/editesupplierinfo",e)}function r(e){return a.a.post("http://www.wuzhi1688.com/yii2/frontend/web/?r=supplier/deletesupplier",e)}}}]);