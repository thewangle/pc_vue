(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3f8d"],{"44Km":function(t,s,e){"use strict";e.r(s);var a=[function(){var t=this.$createElement,s=this._self._c||t;return s("span",[this._v("用户名"),s("span",{staticStyle:{color:"red"}},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",[this._v("密码"),s("span",{staticStyle:{color:"red"}},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",[this._v("管理员"),s("span",{staticStyle:{color:"red"}},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",[this._v("电话"),s("span",{staticStyle:{color:"red"}},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"hellpWrap1"},[s("img",{staticClass:"hellpImg",attrs:{src:e("dqO4"),alt:""}}),this._v(" "),s("span",{staticClass:"hellpB"},[this._v("使用帮助")])])}],i=e("cLjf"),n=e.n(i),r=e("hDQ3"),o=e.n(r),l=(e("f0Pt"),e("X4fA")),c=e("a/LZ"),d=e.n(c),p=e("iVKg"),v={name:"registered",data:function(){return{dialogVisible:!1,username:"",name:"",password:"",department:"",adminname:"",loading:!1,allusers:[],phone:"",partantuser:Object(l.c)()}},mounted:function(){this._fetchUserList()},computed:{tab_biao:function(){return 0==Object(l.a)()?"运营商":1==Object(l.a)()?"部门":2==Object(l.a)()?"柜组":void 0}},methods:{handleLogin:function(){var t=this;if(""!=this.username&&""!=this.password&&""!=this.department&&""!=this.adminname&&""!=this.phone){if(!/^1[3456789]\d{9}$/.test(this.phone))return this.$message({message:"请您输入正确的手机号格式！",type:"warning"}),!1;var s=!0;if(this.allusers.forEach(function(e,a){e.username==t.username&&(t.$message({message:"对不起！该用户已存在！",type:"warning"}),s=!1)}),s){var e=this,a={username:e.username,password:e.password,department:e.department,adminname:e.adminname,partantuser:e.partantuser,phone:e.phone,addtime:d()(new Date).add("days",365).format("YYYY-MM-DD HH:mm:ss")};Object(p.a)(a).then(function(t){var s=t.data;200==s.code?(e.$message({message:"恭喜您！注册成功！",type:"success"}),e.$router.push({path:"/user/userlist"})):202==s.code?e.$message({message:"该用户名已经存在！",type:"warning"}):e.$message.error("对不起！注册失败！")}).catch(function(t){e.$message.error("对不起！注册失败！")})}}else this.$message({message:"请您填写完整信息",type:"warning"})},_fetchUserList:function(){var t=this;return o()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:Object(p.h)().then(function(s){var e=s.data;200==e.code&&(t.allusers=e.data),201==e.code&&console.log("获取失败")}).catch(function(t){console.log("获取失败")});case 1:case"end":return s.stop()}},s,t)}))()}}},u=(e("fNz4"),e("ZrdR")),m=Object(u.a)(v,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrap"},[e("div",{staticClass:"tab"},[e("div",{staticClass:"addB"},[t._v("新增"+t._s(t.tab_biao))]),t._v(" "),e("div",{staticClass:"biao"},[t._m(0),t._v(" "),e("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}},[e("i",{staticClass:"el-icon-user-solid",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),e("div",{staticClass:"biao"},[t._m(1),t._v(" "),e("el-input",{attrs:{placeholder:"请输入密码"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}},[e("i",{staticClass:"el-icon-s-goods",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),e("div",{staticClass:"biao"},[e("span",[t._v(t._s(t.tab_biao)+"名称"),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),e("el-input",{attrs:{placeholder:"请输入"+t.tab_biao+"名称"},model:{value:t.department,callback:function(s){t.department=s},expression:"department"}},[e("i",{staticClass:"el-icon-s-goods",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),e("div",{staticClass:"biao"},[t._m(2),t._v(" "),e("el-input",{attrs:{placeholder:"请输入管理员名称"},model:{value:t.adminname,callback:function(s){t.adminname=s},expression:"adminname"}},[e("i",{staticClass:"el-icon-s-goods",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),e("div",{staticClass:"biao"},[t._m(3),t._v(" "),e("el-input",{attrs:{placeholder:"请输入管理员电话"},model:{value:t.phone,callback:function(s){t.phone=s},expression:"phone"}},[e("i",{staticClass:"el-icon-s-goods",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),e("el-button",{staticClass:"submit",attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(s){return s.preventDefault(),t.handleLogin(s)}}},[t._v("注 册")])],1),t._v(" "),e("drawer",{attrs:{title:"添加账号页 - 使用说明",visible:t.dialogVisible,width:"500px","close-on-click-modal":""},on:{"update:visible":function(s){t.dialogVisible=s}}},[e("div",{staticClass:"smWrap"},[e("div",{staticClass:"smB"},[t._v("概述：此页为添加账号功能页")]),t._v(" "),e("div",{staticClass:"smContent"},[e("span",{staticClass:"smContentB"},[t._v("字段说明：")]),t._v(" "),e("div",{staticClass:"smContentC"},[e("div",[t._v('1."用户名"：该账号的用户名，用于登录(必填)')]),t._v(" "),e("div",[t._v('2."名称"：该账号的电话，用于经营分析、列表等的展示(必填)')]),t._v(" "),e("div",[t._v('3."密码"：该账号的密码，用于登录(必填)')]),t._v(" "),e("div",[t._v('4."管理员"：该账号的管理员(必填)')]),t._v(" "),e("div",[t._v('5."电话"：该账号的联系电话(必填)')])])]),t._v(" "),e("div",{staticClass:"smContent"},[e("span",{staticClass:"smContentB"},[t._v("备注：")]),t._v(" "),e("div",{staticClass:"smContentC"},[e("div",[t._v('1.带"*"均为必填项')]),t._v(" "),e("div",[t._v('2."商场级别"的账号可以创建"部门级别"的账号，"部门级别"的账号可以创建"柜组级别"的账号')])])])])]),t._v(" "),e("div",{staticClass:"hellpWrap",staticStyle:{top:"100px"},on:{click:function(s){t.dialogVisible=!0}}},[t._m(4)])],1)},a,!1,null,"5a4f7db1",null);m.options.__file="index.vue";s.default=m.exports},JxFA:function(t,s,e){},dqO4:function(t,s,e){t.exports=e.p+"static/img/hellp.6fec94b.jpg"},fNz4:function(t,s,e){"use strict";var a=e("JxFA");e.n(a).a}}]);